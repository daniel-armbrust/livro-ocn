<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Guia Prático para Implantação de Aplicações Cloud Native na Oracle Cloud Infrastructure (OCI)."><meta name=author content="Daniel Armbrust (darmbrust@gmail.com)"><link href=https://ocn.dev.br/capitulo-3/iam-limites-cotas-e-audit/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Capítulo 3: OCI Foundations - OCN - Oracle Cloud Native</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Open Sans";--md-code-font:"Red Hat Mono"}</style><link rel=stylesheet href=../../css/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#capitulo-3-oci-foundations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OCN - Oracle Cloud Native" class="md-header__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OCN - Oracle Cloud Native </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Capítulo 3: OCI Foundations </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange aria-label="Light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OCN - Oracle Cloud Native" class="md-nav__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> OCN - Oracle Cloud Native </label> <div class=md-nav__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prefacio/ class=md-nav__link> <span class=md-ellipsis> Prefácio </span> </a> </li> <li class=md-nav__item> <a href=../../sobre-o-autor/ class=md-nav__link> <span class=md-ellipsis> Sobre o Autor </span> </a> </li> <li class=md-nav__item> <a href=../../como-usar-este-livro/ class=md-nav__link> <span class=md-ellipsis> Como usar este Livro </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-1/ class=md-nav__link> <span class=md-ellipsis> Capítulo 1 - Introdução à Computação em Nuvem </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-2/ class=md-nav__link> <span class=md-ellipsis> Capítulo 2 - Aplicação OCI PIZZA </span> </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Capítulo 3 - OCI Foundations </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-4/ class=md-nav__link> <span class=md-ellipsis> Capítulo 4 - Serviços Auxiliares e Persistência de Dados </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-5/ class=md-nav__link> <span class=md-ellipsis> Capítulo 5 - Conectividade e Redes </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-6/ class=md-nav__link> <span class=md-ellipsis> Capítulo 6 - Contêineres, Docker e Funções </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-7/ class=md-nav__link> <span class=md-ellipsis> Capítulo 7 - Publicando a Aplicação na Web </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-8/ class=md-nav__link> <span class=md-ellipsis> Capítulo 8 - Oracle Kubernetes Engine (OKE) </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-9/ class=md-nav__link> <span class=md-ellipsis> Capítulo 9 - Serviço DevOps </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-10/ class=md-nav__link> <span class=md-ellipsis> Capítulo 10 - Monitoração e Observabilidade </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-11/ class=md-nav__link> <span class=md-ellipsis> Capítulo 11 - Infraestrutura como Código (IaC) </span> </a> </li> <li class=md-nav__item> <a href=../../apendice-a/ class=md-nav__link> <span class=md-ellipsis> Apêndice A - OCI HOWTOs </span> </a> </li> <li class=md-nav__item> <a href=../../bibliografia/ class=md-nav__link> <span class=md-ellipsis> Bibliografia </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> ChangeLog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=capitulo-3-oci-foundations>Capítulo 3: OCI Foundations</h1> <h1 id=36-iam-limites-cotas-e-audit>3.6 IAM, Limites, Cotas e Audit</h1> <p>O serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/getstarted/identity-domains.htm>Identity and Access Management (IAM)</a></em> fornece recursos para o <strong><em>gerenciamento de identidades</em></strong> e o <strong><em>controle de acesso</em></strong> aos recursos que você cria e gerencia no OCI.</p> <ul> <li> <p><strong>Gerenciamento de Identidades</strong></p> <ul> <li>Envolve a administração de usuários, senhas e grupos.</li> </ul> </li> <li> <p><strong>Controle de Acesso</strong></p> <ul> <li>Refere-se às políticas de acesso que definem e concedem autorizações, determinando quem pode acessar quais recursos e em que nível.</li> </ul> </li> </ul> <p>Toda ação realizada sobre qualquer recurso no OCI, deve ser iniciada por um usuário válido que consiga se <strong><em>autenticar</em></strong>. Este é o primeiro passo no processo de concessão de acesso. Após uma autenticação bem-sucedida, o OCI verifica se o usuário possui a <strong><em>autorização</em></strong> necessária para executar a ação solicitada.</p> <p>Esse conjunto de processos, que começa com a verificação da autenticação e passa pela checagem de autorização, é gerenciado pelo serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/getstarted/identity-domains.htm>IAM</a></em>. </p> <p>Em resumo, o <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/getstarted/identity-domains.htm>IAM</a></em> assegura que apenas usuários autenticados e autorizados possam interagir com recursos específicos, garantindo a segurança e a integridade do seu ambiente no OCI.</p> <p>Iniciaremos com uma explicação sobre o <strong><em>gerenciamento de identidades</em></strong>, abordando usuários e grupos. Em seguida, discutiremos o processo de <strong><em>autorização ou controle de acesso</em></strong> e, por último, exploraremos o que são <em><a href=https://docs.oracle.com/pt-br/iaas/Content/General/Concepts/servicelimits.htm>Limites do Serviço</a></em> e <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>Cotas de Compartimento</a></em>.</p> <h2 id=361-gerenciamento-de-identidades>3.6.1 Gerenciamento de Identidades</h2> <p>Cada ação realizada nos recursos do OCI, que incluem os recursos do seu <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>, deve ser executada por um usuário nomeado e válido, independentemente de ser através do <em><a href=../acessando-o-oci/#web-console>Web Console</a></em>, <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em> ou <em><a href=../acessando-o-oci/#oci-sdk-oci-software-development-kits>SDK</a></em>.</p> <p>O gerenciamento de identidades no OCI é feito através de dois recursos:</p> <ul> <li> <p><strong><a href=https://docs.oracle.com/en-us/iaas/Content/Identity/users/about-managing-users.htm>Contas de Usuários</a></strong></p> <ul> <li>Uma conta de usuário é uma entidade que representa uma pessoa ou um serviço que pode interagir com os recursos do OCI.</li> </ul> </li> <li> <p><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/groups/managinggroups.htm>Grupos de Usuários</a></strong></p> <ul> <li>Um grupo de usuários é uma coleção de contas de usuários que compartilham as mesmas permissões e políticas de acesso.</li> </ul> </li> </ul> <p>Iniciaremos a explicação sobre o <em>Gerenciamento de Identidades</em> através do usuário <em>Administrador</em> do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>. Em seguida, abordaremos o processo de criação de usuários e grupos.</p> <h3 id=usuario-administrador><strong>Usuário Administrador</strong></h3> <p>Toda conta criada no OCI possui, por padrão, um usuário <em>administrador</em>. Além de ter <strong><em>acesso total</em></strong> ao <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>, este é o primeiro usuário do <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/getstarted/identity-domains.htm>IAM</a></em> criado após a ativação da conta, sendo responsável por configurar todos os demais usuários.</p> <p>O usuário administrador pertence automaticamente ao grupo <strong><em>Administrators</em></strong>. Você não pode excluir esse grupo, e deve sempre haver pelo menos um usuário contido nele. </p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>group<span class=w> </span>list<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;Administrators&quot;</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=o>{</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=o>[</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=o>{</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>      </span><span class=s2>&quot;compartment-id&quot;</span>:<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>,
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>      </span><span class=s2>&quot;defined-tags&quot;</span>:<span class=w> </span><span class=o>{}</span>,
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>      </span><span class=s2>&quot;description&quot;</span>:<span class=w> </span><span class=s2>&quot;Administrators&quot;</span>,
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>      </span><span class=s2>&quot;freeform-tags&quot;</span>:<span class=w> </span><span class=o>{}</span>,
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>      </span><span class=s2>&quot;id&quot;</span>:<span class=w> </span><span class=s2>&quot;ocid1.group.oc1..aaaaaaaaqqqqqzzzzzyyyyyyyyxxxxxx&quot;</span>,
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>      </span><span class=s2>&quot;inactive-status&quot;</span>:<span class=w> </span>null,
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>      </span><span class=s2>&quot;lifecycle-state&quot;</span>:<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>,
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>      </span><span class=s2>&quot;name&quot;</span>:<span class=w> </span><span class=s2>&quot;Administrators&quot;</span>,
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=w>      </span><span class=s2>&quot;time-created&quot;</span>:<span class=w> </span><span class=s2>&quot;2024-09-16T19:11:12.670000+00:00&quot;</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=w>    </span><span class=o>}</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=w>  </span><span class=o>]</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p>Apenas para registrar, e abordaremos isso mais adiante, o acesso total ao <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em> para o grupo <strong><em>Administrators</em></strong> é concedido por meio de uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm#top>Policy</a></em> chamada <strong><em>"Tenant Admin Policy"</em></strong>. Essa <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm#top>Policy</a></em> pode ser consultada utilizando o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span>
<span class=normal><a href=#__codelineno-1-4>4</a></span>
<span class=normal><a href=#__codelineno-1-5>5</a></span>
<span class=normal><a href=#__codelineno-1-6>6</a></span>
<span class=normal><a href=#__codelineno-1-7>7</a></span>
<span class=normal><a href=#__codelineno-1-8>8</a></span>
<span class=normal><a href=#__codelineno-1-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>policy<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;Tenant Admin Policy&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s1>&#39;data[].statements&#39;</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=o>[</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>  </span><span class=o>[</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><span class=w>    </span><span class=s2>&quot;ALLOW GROUP Administrators to manage all-resources IN TENANCY&quot;</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><span class=w>  </span><span class=o>]</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O comando para consultar a <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm#top>policy</a></em> <em>"Tenant Admin Policy"</em> deve incluir, no parâmetro <em>--compartment-id</em>, o valor <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>. Note que o comando anterior, que exibiu o grupo <em>Administrators</em>, trouxe esse valor por meio da chave <em>"compartment-id"</em>.</p> </div> <h3 id=criando-usuarios><strong>Criando Usuários</strong></h3> <p>O comando abaixo é utilizado para criar um novo usuário com o nome de login <em>fulano.beltrano</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span>
<span class=normal><a href=#__codelineno-2-4>4</a></span>
<span class=normal><a href=#__codelineno-2-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>user<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;fulano.beltrano&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a>&gt;<span class=w> </span>--email<span class=w> </span><span class=s2>&quot;fbeltrano@sem-dominio.br&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Usuário Fulano Beltrano da equipe de Redes.&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>O parâmetro <strong><em>--email</em></strong> permite especificar o endereço de e-mail do usuário, que deve ser exclusivo entre todos os usuários do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>. Uma das principais funções desse endereço de e-mail é facilitar ações de <em>recuperação de senha</em>, por exemplo.</p> <p>Para definir uma senha para o usuário, que será utilizada para acessar o OCI por meio da <em><a href=../acessando-o-oci/#web-console>Web Console</a></em>, é necessário primeiro obter o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do usuário utilizando o seguinte comando:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span>
<span class=normal><a href=#__codelineno-3-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>user<span class=w> </span>list<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;fulano.beltrano&quot;</span><span class=w> </span>--query<span class=w> </span><span class=s2>&quot;data[].id&quot;</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=o>[</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w>  </span><span class=s2>&quot;ocid1.user.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <p>Com o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do usuário, é possível definir uma nova senha, seja para um novo acesso ou em caso de perda da senha anterior:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>user<span class=w> </span>ui-password<span class=w> </span>create-or-reset<span class=w> </span><span class=se>\</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a>&gt;<span class=w> </span>--user-id<span class=w> </span><span class=s2>&quot;ocid1.user.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=o>{</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=o>{</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>    </span><span class=s2>&quot;inactive-status&quot;</span>:<span class=w> </span>null,
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>    </span><span class=s2>&quot;lifecycle-state&quot;</span>:<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>,
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>    </span><span class=s2>&quot;password&quot;</span>:<span class=w> </span><span class=s2>&quot;EbvyTY9r8Zl6&quot;</span>,
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>    </span><span class=s2>&quot;time-created&quot;</span>:<span class=w> </span><span class=s2>&quot;2025-03-28T16:44:40.393000+00:00&quot;</span>,
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>    </span><span class=s2>&quot;user-id&quot;</span>:<span class=w> </span><span class=s2>&quot;ocid1.user.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>  </span><span class=o>}</span>,
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>  </span><span class=s2>&quot;etag&quot;</span>:<span class=w> </span><span class=s2>&quot;518161f35e8944e8a28c923c4a8bb7b5&quot;</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p>Observe que a senha, presente na chave <em>"password"</em>, foi gerada automaticamente pelo OCI.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/passwordpolicies/Managing-Password-Policies.htm>"Gerenciando Políticas de Senha"</a></em> para obter mais informações sobre como ajustar as políticas de senha do Tenancy.</p> </div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O OCI também oferece suporte ao uso de usuários federados, além dos usuários locais criados diretamente no IAM. Para um exemplo de como federar usuários com o <em>Microsoft Active Directory (AD)</em>, consulte o apêndice <em><a href=../../apendice-a/federacao-com-microsoft-active-directory/ >A.4 Federação com Microsoft Active Directory (AD)</a></em>.</p> </div> <h3 id=criando-grupos><strong>Criando Grupos</strong></h3> <p>O acesso aos diversos recursos do OCI é concedido a grupos, e não a usuários individuais. Isso significa que, como administrador, você deve autorizar um grupo de usuários em vez de conceder permissões a cada usuário individual.</p> <p>Um <strong><em>grupo é uma coleção de usuários</em></strong>, e um usuário pode ser membro de mais de um grupo.</p> <p>Para criar um grupo de usuários, execute o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span>
<span class=normal><a href=#__codelineno-5-2>2</a></span>
<span class=normal><a href=#__codelineno-5-3>3</a></span>
<span class=normal><a href=#__codelineno-5-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>group<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;network-users&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Grupo de usuários que pertencem à equipe de Redes.&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>Após a criação do grupo, é possível adicionar usuários a ele. Para isso, é necessário obter o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> tanto do grupo quanto do usuário que será adicionado.</p> <p>O comando abaixo retorna o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do grupo <em>group-network</em> recém-criado:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span>
<span class=normal><a href=#__codelineno-6-3>3</a></span>
<span class=normal><a href=#__codelineno-6-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>group<span class=w> </span>list<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;network-users&quot;</span><span class=w> </span>--query<span class=w> </span><span class=s2>&quot;data[].id&quot;</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=o>[</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=w>  </span><span class=s2>&quot;ocid1.group.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <p>Para adicionar o usuário <em>fulano.beltrano</em> ao grupo <em>network-users</em>, utilize o seguinte comando:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span>
<span class=normal><a href=#__codelineno-7-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>group<span class=w> </span>add-user<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a>&gt;<span class=w> </span>--group-id<span class=w> </span><span class=s2>&quot;ocid1.group.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a>&gt;<span class=w> </span>--user-id<span class=w> </span><span class=s2>&quot;ocid1.user.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>O comando abaixo exibe a lista de usuários que são membros do grupo <em>network-users</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span>
<span class=normal><a href=#__codelineno-8-4>4</a></span>
<span class=normal><a href=#__codelineno-8-5>5</a></span>
<span class=normal><a href=#__codelineno-8-6>6</a></span>
<span class=normal><a href=#__codelineno-8-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>group<span class=w> </span>list-users<span class=w> </span><span class=se>\</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a>&gt;<span class=w> </span>--group-id<span class=w> </span><span class=s2>&quot;ocid1.group.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s2>&quot;data[].name&quot;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=o>[</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w>  </span><span class=s2>&quot;fulano.beltrano&quot;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <h3 id=grupos-de-usuarios-da-aplicacao-oci-pizza><strong>Grupos de Usuários da Aplicação OCI PIZZA</strong></h3> <p>O script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/group.sh>scripts/capitulo-2/group.sh</a></em></strong> contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>, inclui todos os comandos necessários para a criação dos Grupos de Usuários utilizados pela aplicação <strong>OCI PIZZA</strong>.</p> <h2 id=362-controle-de-acesso>3.6.2 Controle de Acesso</h2> <p>Toda interação com as APIs do OCI exige uma <strong><em>autorização</em></strong> explícita. Isso significa que, por exemplo, para que um usuário possa criar uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/Overview_of_VCNs_and_Subnets.htm>VCN</a></em>, após se autenticar com sucesso, ele deve ter as permissões adequadas para realizar essa ação.</p> <p>A concessão de acesso ou autorização no OCI é realizada por meio de dois recursos principais, que são:</p> <ul> <li> <p><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>Compartimentos</a></strong></p> <ul> <li>São unidades de organização que permitem agrupar e isolar recursos, facilitando a gestão e o controle de acesso.</li> </ul> </li> <li> <p><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Políticas de Acesso</a></strong></p> <ul> <li>São regras que definem permissões e controlam o acesso aos recursos.</li> </ul> </li> </ul> <p>Uma boa prática é iniciar o <em>"desenho do processo de autorização"</em> com as definições dos <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimentos</a></em>. Após a criação dos <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimentos</a></em>, é necessário criar as <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>políticas de acesso</a></em> para permitir que um <em><a href=#criando-grupos>grupo de usuários</a></em> crie e gerencie os recursos contidos em cada <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em> específico.</p> <h3 id=compartimentos><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>Compartimentos</a></strong></h3> <p><em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>Compartimentos</a></em>, ou <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>Compartments</a></em>, são uma <strong><em>estrutura lógica</em></strong> que permite <strong><em>organizar</em></strong> e <strong><em>isolar</em></strong> os recursos que você cria no OCI. Utilizar <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimentos</a></em> facilita o gerenciamento desses recursos e proporciona uma camada adicional de <strong><em>proteção contra acessos não autorizados</em></strong>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p><strong>Lembre-se:</strong> um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em>, juntamente com sua <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/access/manage-accessresources.htm>política de acesso</a></em> correspondente, protege o acesso dos usuários às APIs do OCI, permitindo listar, criar, excluir ou atualizar recursos na nuvem. No entanto, os <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em> não impõem controle de acesso em nível de rede, ou seja, não funcionam como um <em>firewall</em>.</p> </div> <p>Toda conta no OCI possui um <strong><em>Root Compartment</em></strong> ou <strong><em>Tenancy Compartment</em></strong>, que é criado automaticamente após a ativação da conta. Isso se deve ao fato de que todos os recursos que você cria, deve ser colocado dentro de um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em>. Em outras palavras, cada recurso deve pertencer a um único <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em>.</p> <p>O nome do <strong><em>Root Compartment</em></strong> corresponde ao <strong><em>nome da conta</em></strong> que foi especificado durante o processo de cadastro <em>(ocipizza)</em>. Você pode obter o seu <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> utilizando o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>compartment<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a>&gt;<span class=w> </span>--include-root<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;ocipizza&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s1>&#39;data[*].[name,id]&#39;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><span class=o>[</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><span class=w>  </span><span class=o>[</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><span class=w>    </span><span class=s2>&quot;ocipizza&quot;</span>,
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9></a><span class=w>    </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10></a><span class=w>  </span><span class=o>]</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <p>Entenda o <strong><em>Root ou Tenancy Compartment</em></strong>, como se fosse o <em>"contêiner pai"</em> que abriga todos os seus recursos no OCI, incluindo os recursos de outros <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Alocar recursos diretamente no <em>Root Compartment</em> não é uma boa prática, especialmente quando há diferentes usuários na organização que precisarão interagir com os recursos no OCI. A boa prática é ter diferentes <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimentos</a></em> sendo que cada <em><a href=#compartimentos>compartimento</a></em>, será gerenciado por um grupo específico de usuários.</p> </div> <p>A <em><a href=../acessando-o-oci/#web-console>Web Console</a></em> filtra a exibição dos seus recursos por <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em> dentro da região, e você deve selecionar o <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em> em que deseja trabalhar a partir de uma lista.</p> <p><img alt=alt_text src=../img/oci-comp-filter-1.png title="Filtro de Compartmento"> <br></p> <p>Os <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em> são <strong><em>recursos globais</em></strong> e, uma vez criados, estarão disponíveis em todas as regiões inscritas.</p> <p>Por fim, é possível criar até <strong><em>seis subcompartimentos</em></strong> dentro de um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimento</a></em>, e a maioria dos recursos pode ser movida entre <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/compartments/managingcompartments.htm>compartimentos</a></em>.</p> <p><img alt=alt_text src=../img/oci-subcompartments-1.png title=Subcompartimentos> <br></p> <h4 id=compartimentos-da-aplicacao-oci-pizza><strong>Compartimentos da Aplicação OCI PIZZA</strong></h4> <p>Para ilustrar melhor o uso de <em><a href=#compartimentos>Compartimento</a></em>, imagine diferentes grupos de profissionais de TI colaborando no desenvolvimento da aplicação <strong><em><a href=../capitulo-3/ocipizza-overview.md>OCI PIZZA</a></em></strong>. Esses grupos incluem:</p> <ul> <li> <p><strong>REDES</strong></p> <ul> <li>Grupo de pessoas responsáveis pela criação e gerenciamento dos recursos de rede no OCI.</li> </ul> </li> <li> <p><strong>APLICAÇÃO</strong></p> <ul> <li>Grupo de pessoas responsáveis pela criação e gerenciamento de recursos de computação, bem como pela implantação da aplicação.</li> </ul> </li> <li> <p><strong>DBA</strong></p> <ul> <li>Grupo de pessoas responsáveis pela criação e gerenciamento dos Bancos de Dados.</li> </ul> </li> </ul> <p>A separação de funções por tipo de profissional é uma prática comum que garante que cada equipe tenha acesso somente aos recursos necessários para desempenhar suas atividades. Por exemplo, os profissionais da equipe de <strong><em>REDES</em></strong> terão permissão apenas para gerenciar recursos de rede, como <em><a href=../capitulo-4/servico-de-redes.md>VCNs</a></em>, <em><a href=../capitulo-4/servico-de-redes.md>sub-redes</a></em>, <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/overviewIPsec.htm>VPNs Site-To-Site</a></em>, etc.</p> <p>Por outro lado, os profissionais de <strong><em>APLICAÇÃO</em></strong> terão acesso somente aos recursos de computação, como <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Compute/Concepts/computeoverview.htm>Compute Instances</a></em>, <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em>, <em><a href=../../capitulo-8/ >Kubernetes Engine (OKE)</a></em>, etc.</p> <p>Da mesma forma, os profissionais <strong><em>DBA</em></strong> terão acesso somente aos recursos de bancos de dados, como o <em><a href=https://docs.oracle.com/en/database/other-databases/nosql-database/index.html>Oracle NoSQL</a></em>.</p> <p>Além da separação por grupos de usuários, outra forma de organizar os recursos é através da distinção por <em>"ambientes"</em>, como <strong><em>Produção (PRD)</em></strong>, <strong><em>Homologação (HML)</em></strong> e <strong><em>Desenvolvimento (DEV)</em></strong>.</p> <p>Com base nessas definições, temos a seguinte estrutura de <em><a href=#compartimentos>compartimento</a></em> e <em>subcompartimentos (child compartments)</em> para o <em>ambiente de produção (prd)</em>:</p> <p><img alt=alt_text src=../img/oci-comp-ocipizza-1.png title="Compartimentos da Aplicação OCI PIZZA"> <br></p> <p>A partir do desenho, é possível observar que o grupo de usuários de redes <em>(group-network)</em> terá autorização para criar recursos de rede exclusivamente no <em><a href=#compartimentos>compartimento</a></em> <em>cmp-network</em>. Outros grupos de usuários, como o de <em>aplicação (group-appl)</em> e o de <em>DBA (group-dba)</em>, também terão permissões restritas aos seus respectivos <em><a href=#compartimentos>compartimentos</a></em> <em>(cmp-appl e cmp-database)</em>. Por fim, o grupo <em>Administrators</em> tem acesso total a todos os <em><a href=#compartimentos>compartimentos</a></em>.</p> <p>Para criar um <em><a href=#compartimentos>compartimento</a></em>, utilize o seguinte comando:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span>
<span class=normal><a href=#__codelineno-10-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>compartment<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;cmp-prd&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Compartimento para os recursos de produção (cmp-prd).&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>Após a criação do <em><a href=#compartimentos>compartimento</a></em>, obteremos seu <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> que será utilizado na criação do próximo <em><a href=#compartimentos>compartimentos</a></em>, estabelecendo assim a hierarquia de <em><a href=#compartimentos>compartimentos</a></em>, igual ao que foi apresentado na imagem anterior.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span>
<span class=normal><a href=#__codelineno-11-3>3</a></span>
<span class=normal><a href=#__codelineno-11-4>4</a></span>
<span class=normal><a href=#__codelineno-11-5>5</a></span>
<span class=normal><a href=#__codelineno-11-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>compartment<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;cmp-prd&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s2>&quot;data[].id&quot;</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=o>[</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><span class=w>  </span><span class=s2>&quot;ocid1.compartment.oc1..aaaaaavvvvvvvddddddddddd&quot;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <p>Com o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do <em><a href=#compartimentos>compartimento</a></em> do <em>ambiente de produção (prd)</em>, prosseguimos para a criação do próximo <em><a href=#compartimentos>compartimento</a></em>, que é o <em>cmp-network</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span>
<span class=normal><a href=#__codelineno-12-2>2</a></span>
<span class=normal><a href=#__codelineno-12-3>3</a></span>
<span class=normal><a href=#__codelineno-12-4>4</a></span>
<span class=normal><a href=#__codelineno-12-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>compartment<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.compartment.oc1..aaaaaavvvvvvvddddddddddd&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;cmp-network&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Compartimento para os recursos de redes do ambiente de produção.&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>A criação dos demais <em><a href=#compartimentos>compartimentos</a></em> seguem a mesma lógica e não serão apresentados aqui.</p> <p>O script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/compartment.sh>scripts/capitulo-2/compartment.sh</a></em></strong> contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>, inclui todos os comandos para a criação dos <em><a href=#compartimentos>compartimentos</a></em> da aplicação <strong>OCI PIZZA</strong>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>A Oracle recomenda a criação e configuração de um <em><a href=#compartimentos>compartimentos</a></em> <strong><em>sandbox</em></strong> para proporcionar aos usuários um espaço dedicado para testar recursos. No <em><a href=#compartimentos>compartimento</a></em> <em>sandbox</em>, você pode conceder permissões aos usuários para criar e gerenciar recursos, enquanto mantém permissões mais restritivas nos demais <em><a href=#compartimentos>compartimentos</a></em>.</p> </div> <ul> <li>TODO: os exemplos do livro utilizam o compartimento de produção apenas.</li> </ul> <h3 id=politicas-de-acesso><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Políticas de Acesso</a></strong></h3> <p>Uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Política de Acesso</a></em>, <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Política</a></em> ou <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em>, é um documento que contém uma ou mais declarações destinadas a conceder acesso e autorizar, um grupo de usuários, em gerenciar determinado serviço ou recurso do OCI. A Policy permite especificar permissões em nível de <em><a href=#compartimentos>compartimento</a></em> ou para todo o <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</p> <p>A concessão de acesso é feita a um grupo de usuários ou a um serviço, e não a um usuário específico. Além disso, todo grupo de usuários que é criado não possui nenhuma permissão de acesso, a menos que uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em> tenha sido previamente definida. É responsabilidade do administrador do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em> conceder permissões ao grupo ou serviço por meio de uma ou mais <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>policies</a></em>.</p> <p>Basicamente, a sintaxe geral da <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em> possui o seguinte formato:</p> <p><img alt=alt_text src=../img/oci-iam-policy-1.png title="IAM Policy - Exemplo #1"></p> <p><em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policies</a></em> sempre começam com a palavra <strong><em>Allow</em></strong>. Isso significa que as <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policies</a></em> que você cria apenas concedem ou autorizam acesso, não podendo negá-lo, uma vez que, por padrão, tudo já é negado.</p> <p>Abaixo está o significado de cada uma das partes em destaque que compõem uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em>:</p> <h4 id=assunto><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/subject.htm>Assunto</a></strong></h4> <p>O elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/subject.htm>assunto</a></em> pode especificar um <em><a href=#261-gerenciamento-de-identidades>Grupo de Usuários</a></em>, <em><a href=https://docs.public.oneportal.content.oci.oraclecloud.com/pt-br/iaas/Content/Identity/dynamicgroups/Working_with_Dynamic_Groups.htm>Grupo Dinâmico</a></em> ou serviços do OCI, utilizando uma das seguintes formas:</p> <ul> <li> <p><strong>group</strong></p> <ul> <li>Nome do <em><a href=#261-gerenciamento-de-identidades>Grupo de Usuários</a></em> no qual o acesso será concedido.</li> </ul> </li> <li> <p><strong>group id</strong></p> <ul> <li><em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do <em><a href=#261-gerenciamento-de-identidades>Grupo de Usuários</a></em> no qual o acesso será concedido.</li> </ul> </li> <li> <p><strong>dynamic-group</strong></p> <ul> <li>Nome do <em><a href=https://docs.public.oneportal.content.oci.oraclecloud.com/pt-br/iaas/Content/Identity/dynamicgroups/Working_with_Dynamic_Groups.htm>Grupo Dinâmico</a></em> no qual o acesso será concedido.</li> </ul> </li> <li> <p><strong>dynamic-group id</strong></p> <ul> <li><em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do <em><a href=https://docs.public.oneportal.content.oci.oraclecloud.com/pt-br/iaas/Content/Identity/dynamicgroups/Working_with_Dynamic_Groups.htm>Grupo Dinâmico</a></em> no qual o acesso será concedido.</li> </ul> </li> <li> <p><strong>service</strong></p> <ul> <li>Especifica o nome do serviço OCI no qual o acesso será concedido.</li> </ul> </li> <li> <p><strong>any-group</strong></p> <ul> <li>Indica todos os <em><a href=#261-gerenciamento-de-identidades>Grupos de Usuários</a></em> e <em><a href=https://docs.public.oneportal.content.oci.oraclecloud.com/pt-br/iaas/Content/Identity/dynamicgroups/Working_with_Dynamic_Groups.htm>Grupos Dinâmico</a></em> do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</li> </ul> </li> </ul> <p>Há também a sintaxe <strong><em>&lt;Nome do Domínio de Identidade&gt;/&lt;Nome do Grupo&gt;</em></strong> que pode ser utilizada para se referir a um <em><a href=#261-gerenciamento-de-identidades>Grupo de Usuários</a></em> existente em um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/domains/overview.htm>Domínio de Identidade</a></em> que não é o <strong><em>Default</em></strong>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O livro utiliza o <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/domains/overview.htm>Domínio de Identidade</a></em> <strong><em>Default</em></strong>, que é criado automaticamente durante o processo de ativação da conta. Para saber mais sobre <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/domains/overview.htm>Domínios de Identidade</a></em>, consulte <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/domains/overview.htm>"Gerenciando Domínios de Identidade"</a></em>.</p> </div> <h4 id=verbo><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Verbs.htm>Verbo</a></strong></h4> <p>O elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Verbs.htm>verbo</a></em> especifica o <em>tipo de acesso</em> que será concedido em relação as operações que podem ser feitas em uma determinada API de um determinado serviço. Seus valores incluem:</p> <ul> <li> <p><strong>inspect</strong></p> <ul> <li>Concede a autorização para listar recursos.</li> </ul> </li> <li> <p><strong>read</strong></p> <ul> <li>Inclui as permissões do verbo <em>inspect</em> mais a capacidade de obter metadados do recurso.</li> </ul> </li> <li> <p><strong>use</strong></p> <ul> <li>Inclui as permissões do verbo <em>read</em> mais a capacidade de poder <em>atualizar</em> o recurso <em>(operações de update)</em>. Em geral, esse verbo não inclui a capacidade de criar ou excluir um recurso.</li> </ul> </li> <li> <p><strong>manage</strong></p> <ul> <li>Inclui todas as permissões para o recurso. </li> </ul> </li> </ul> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Como é possível perceber o nível de acesso é cumulativo à medida que você vai de <em>inspect &gt; read &gt; use &gt; manage</em>.</p> </div> <p>Sabemos que, para cada serviço disponibilizado pelo OCI, existem uma ou mais APIs disponíveis, e cada API oferece uma funcionalidade específica relacionada ao serviço.</p> <p>Em termos de concessão de acesso, por exemplo, o verbo <em>inspect</em> para o serviço de <em><a href=../capitulo-4/load-balancer.md>Load Balancer</a></em>, inclui a permissão nomeada <strong><em>LOAD_BALANCER_INSPECT</em></strong> que concede acesso às APIs <strong><em>ListLoadBalancers</em></strong>, <strong><em>ListShapes</em></strong>, <strong><em>ListPolicies</em></strong> e <strong><em>ListProtocols</em></strong>.</p> <p><img alt=alt_text src=../img/oci-api-doc-1.png title="Load Balancer API - ListLoadBalancers"> <br></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Normalmente, os nomes das APIs são autoexplicativos. No entanto, se você deseja obter informações detalhadas sobre os tipos de operações de uma API específica, consulte o link <em><a href=https://docs.oracle.com/en-us/iaas/api/#/ >"API Reference and Endpoints"</a></em>.</p> </div> <p>O objetivo dos <em>verbos</em> é simplificar o processo de concessão de diversas permissões relacionadas. Para facilitar a compreensão, abaixo está um exemplo da correlação entre um <em>verbo</em> e as <em>permissões</em> associadas às APIs do serviço <em><a href=../capitulo-4/load-balancer.md>Load Balancer</a></em>:</p> <table> <thead> <tr> <th>Verbo</th> <th>Permissão</th> <th>API</th> </tr> </thead> <tbody> <tr> <td>inspect</td> <td>LOAD_BALANCER_INSPECT</td> <td><em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancer/ListLoadBalancers>ListLoadBalancers</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancerShape/ListShapes>ListShapes</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancerPolicy/ListPolicies>ListPolicies</a></em> e <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancerProtocol/ListProtocols>ListProtocols</a></em></td> </tr> <tr> <td>read</td> <td><em>inspect</em> + LOAD_BALANCER_READ</td> <td><em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancer/GetLoadBalancer>GetLoadBalancer</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/BackendSet/GetBackendSet>GetBackendSet</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/Backend/GetBackend>GetBackend</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/HealthChecker/GetHealthChecker>GetHealthChecker</a></em>, etc.</td> </tr> <tr> <td>use</td> <td><em>read</em> + LOAD_BALANCER_UPDATE e LOAD_BALANCER_MOVE</td> <td><em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/BackendSet/UpdateBackendSet>UpdateBackendSet</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/BackendSet/DeleteBackendSet>DeleteBackendSet</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/Listener/UpdateListener>UpdateListener</a></em>, etc.</td> </tr> <tr> <td>manage</td> <td><em>use</em> + LOAD_BALANCER_CREATE e LOAD_BALANCER_DELETE</td> <td><em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancer/CreateLoadBalancer>CreateLoadBalancer</a></em> e <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/loadbalancer/20170115/LoadBalancer/DeleteLoadBalancer>DeleteLoadBalancer</a></em></td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O link <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policyreference/policyreference.htm>"Referência da Política de Serviço Detalhada"</a></em> contém todos os detalhes referente as permissões e operações às APIs para todos os serviços disponibilizados pelo OCI.</p> </div> <p>No exemplo abaixo, a <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em> escrita concede ao <em>grupo network-users</em>, acesso a todas as APIs do serviço que gerencia <em><a href=../capitulo-4/servico-de-redes.md>VCNs</a></em> em todo o <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>:</p> <p><img alt=alt_text src=../img/oci-iam-policy-2.png title="OCI IAM Policy #2"> <br></p> <p>Compreender a relação entre permissões e as APIs disponíveis por serviço facilita a elaboração de <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policies</a></em> mais granulares em termos de acesso. Veremos adiante que é possível, por exemplo, conceder acesso apenas às APIs <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/AddVcnCidr>AddVcnCidr</a></em> e <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/RemoveVcnCidr>RemoveVcnCidr</a></em> do verbo <em>manage</em>, sem conceder acesso às demais APIs, como <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/CreateVcn>CreateVcn</a></em>, <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/UpdateVcn>UpdateVcn</a></em> ou <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/DeleteVcn>DeleteVcn</a></em>.</p> <h4 id=tipo-do-recurso><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policiesgs/policies_topic-ResourceTypes.htm>Tipo do Recurso</a></strong></h4> <p>O elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policiesgs/policies_topic-ResourceTypes.htm>tipo do recurso</a></em> refere-se a um recurso específico ou a uma <em>família de recursos</em>.</p> <p>Por exemplo, a <em>família de recursos</em> <strong><em>virtual-network-family</em></strong> abrange vários recursos específicos relacionados a <em><a href=../capitulo-4/servico-de-redes.md>VCN</a></em>, como <strong><em>vcns</em></strong>, <strong><em>subnets</em></strong>, <strong><em>route-tables</em></strong>, <strong><em>security-lists</em></strong>, entre outros. Nesse contexto, <strong><em>vcns</em></strong> e <strong><em>subnets</em></strong> correspondem a recursos específicos, como <em><a href=../capitulo-4/servico-de-redes.md>VCNs</a></em> e <em><a href=../capitulo-4/servico-de-redes.md>Sub-rede</a></em>.</p> <p>Trabalhar com um recurso específico ou uma <em>família de recursos</em> proporciona a flexibilidade de definir exatamente quais recursos terão acesso concedido.</p> <p>Há também o tipo <strong><em>all-resources</em></strong>, que pode ser usado para fazer referência a todos os recursos do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</p> <p><img alt=alt_text src=../img/oci-iam-policy-3.png title="IAM Policy - Exemplo #3"></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policyreference/policyreference.htm>"Referência da Política de Serviço Detalhada"</a></em> para verificar os tipos de recursos disponíveis e o nome da família de recursos à qual cada recurso pertence.</p> </div> <h4 id=local><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/location.htm>Local</a></strong></h4> <p>O elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/location.htm>local</a></em> especifica o <em><a href=#compartimentos>Compartimento</a></em> ou <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em> no qual a <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>Policy</a></em> concede acesso. Em outras palavras, ele define o escopo do acesso, que pode ser um <em><a href=#compartimentos>compartimento</a></em> específico ou todo o <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</p> <p>Os seguintes valores que podem ser usados para o elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/location.htm>local</a></em> são:</p> <ul> <li> <p><strong>tenancy</strong></p> <ul> <li>Abrange todos os recursos do Tenancy.</li> </ul> </li> <li> <p><strong>compartment</strong></p> <ul> <li>Usado para especificar o nome do compartimento onde a policy será aplicada. Se houver subcompartimentos abaixo do compartimento especificado, a policy se aplicará a todos os compartimentos a partir do nível mais alto da hierarquia.</li> </ul> </li> <li> <p><strong>compartment id</strong></p> <ul> <li>Usado para especificar o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do compartimento onde a policy será aplicada. </li> </ul> </li> </ul> <p>Valores válidos para o elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/location.htm>local</a></em> também podem incluír um <em><a href=#compartimentos>compartimento</a></em> específico dentro de uma hierarquia de <em><a href=#compartimentos>compartimentos</a></em>:</p> <p><img alt=alt_text src=../img/oci-iam-policy-4.png title="IAM Policy - Exemplo #4"></p> <p>Para <strong><em>compartment id</em></strong>, é possível utilizar apenas um valor <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> de um <em><a href=#compartimentos>compartimento</a></em> específico. Não é permitido fazer referência a uma hierarquia de <em><a href=#compartimentos>compartimentos</a></em>.</p> <h4 id=condicao><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/conditions.htm>Condição</a></strong></h4> <p>O elemento <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policysyntax/conditions.htm>condição</a></em> e é opcional e pode ser usado para restringir o escopo das permissões concedidas em uma política.</p> <p>Uma condição é escrita utilizando a cláusula <strong>where</strong>, seguida de uma comparação que pode ser simples (uma única condição) ou que pode abranger múltiplas condições.</p> <p>O exemplo abaixo demonstra a utilização de uma condição simples que usa o operador de negação <strong>!=</strong> para excluír somente a permissão <strong>VCN_DELETE</strong> do grupo <em>network-users</em>. Com isso, os usuários desse grupo podem criar VCNs, listar ou atualizar suas informações, mas não têm permissão para excluir uma VCN.</p> <p><img alt=alt_text src=../img/oci-iam-policy-5.png title="IAM Policy - Exemplo #5"></p> <p>Além de <strong><em>request.permission</em></strong> é possível utilizar <strong><em>request.operation</em></strong> para fazer referência a uma operação específica da API:</p> <p><img alt=alt_text src=../img/oci-iam-policy-6.png title="IAM Policy - Exemplo #6"></p> <p>As condições podem ser agrupadas entre chaves na forma <strong><em>{ condição-1, condição-2 }</em></strong> para avaliação. Para criar um <em>OR lógico</em> entre um conjunto de condições, utilize a palavra <strong>any</strong>. Para estabelecer um <em>AND lógico</em> entre um conjunto de condições, utilize <strong>all</strong>.</p> <p>A <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>policy</a></em> de exemplo abaixo utiliza o operador <strong>any</strong> para criar um <em>OR lógico</em>, limitando o acesso do grupo <em>network-users</em> às operações de APIs <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/AddVcnCidr>AddVcnCidr</a></em> ou <em><a href=https://docs.oracle.com/en-us/iaas/api/#/en/iaas/20160918/Vcn/RemoveVcnCidr>RemoveVcnCidr</a></em>.</p> <p><img alt=alt_text src=../img/oci-iam-policy-7.png title="IAM Policy - Exemplo #7"></p> <p>Uma política de acesso pode ser criada da seguinte forma, utilizando o <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1>1</a></span>
<span class=normal><a href=#__codelineno-13-2>2</a></span>
<span class=normal><a href=#__codelineno-13-3>3</a></span>
<span class=normal><a href=#__codelineno-13-4>4</a></span>
<span class=normal><a href=#__codelineno-13-5>5</a></span>
<span class=normal><a href=#__codelineno-13-6>6</a></span>
<span class=normal><a href=#__codelineno-13-7>7</a></span>
<span class=normal><a href=#__codelineno-13-8>8</a></span>
<span class=normal><a href=#__codelineno-13-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>policy<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;network-users-policy&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Políticas de Acesso para o Grupo network-users.&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a>&gt;<span class=w> </span>--statements<span class=w> </span><span class=s2>&quot;[</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><span class=s2>&gt; &#39;Allow group network-users to manage virtual-network-family in compartment cmp-prd:cmp-network&#39;,</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><span class=s2>&gt; &#39;Allow group network-users to manage virtual-network-family in compartment cmp-hml:cmp-network&#39;,</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><span class=s2>&gt; &#39;Allow group network-users to manage virtual-network-family in compartment cmp-dev:cmp-network&#39;]&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>A página da documentação do OCI sobre <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Concepts/commonpolicies.htm>Políticas Comuns</a></em> apresenta diversos exemplos de policies que podem servir como base para a elaboração das suas próprias políticas de acesso.</p> </div> <h3 id=as-politicas-de-acesso-da-aplicacao-oci-pizza><strong>As Políticas de Acesso da Aplicação OCI PIZZA</strong></h3> <p>O script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/policy.sh>scripts/capitulo-2/policy.sh</a></em></strong> contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>, inclui todas as políticas de acesso utilizadas pela aplicação <strong>OCI PIZZA</strong>.</p> <h2 id=363-grupos-dinamicos>3.6.3 Grupos Dinâmicos</h2> <p>Os <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos Dinâmicos</a></em> são um tipo especial de grupo projetado para agrupar recursos, em vez de usuários. </p> <p>A finalidade dos <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos dinâmicos</a></em> é conceder acesso às APIs do OCI a uma <em><a href=../../capitulo-6/ >instância de computação</a></em> ou recurso, que podem incluir não apenas servidores virtuais, mas também servidores que fazem parte de um cluster <em><a href=../../capitulo-8/ >Kubernetes (OKE)</a></em> ou um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em>, por exemplo.</p> <div align=center style="font-weight: bold; font-style: italic;"> Pense da seguinte forma: quando a intenção é conceder acesso de um serviço do OCI a outro, você deve utilizar Grupos Dinâmicos. </div> <p>Uma vez que o <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos Dinâmicos</a></em> foi criado, também é necessário criar uma <em><a href=#políticas-de-acesso>política de acesso</a></em> para autorizar esse grupo a interagir com uma ou mais APIs do OCI. É importante destacar que os <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos Dinâmicos</a></em> inclui como membro um recurso específico, e o acesso concedido a esse recurso, conforme definido na <em><a href=#políticas-de-acesso>política de acesso</a></em>, permitirá que ele crie e gerencie outros recursos no OCI.</p> <p>A definição de um recurso que faz parte do <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em> é feita através de um conjunto de <em>regras de correspondência</em> que especificam recursos através do uso das seguintes variáveis:</p> <ul> <li> <p><strong>instance.compartment.id</strong></p> <ul> <li>Especifica o compartimento onde a instância de computação reside.</li> </ul> </li> <li> <p><strong>instance.id</strong></p> <ul> <li>Especifica o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> da instância de computação.</li> </ul> </li> <li> <p><strong>tag.&lt;tagnamespace&gt;.&lt;tagkey&gt;.value</strong></p> <ul> <li>Especifica o <em>namespace da tag</em> e a <em>chave da tag</em> que podem fazer referência a uma ou mais instâncias de computação no qual incluem as informações da <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Tagging/Concepts/taggingoverview.htm>tag</a></em> especificada.</li> </ul> </li> <li> <p><strong>tag.&lt;tagnamespace&gt;.&lt;tagkey&gt;.value='&lt;tagvalue&gt;'</strong></p> <ul> <li>Especifica além do <em>namespace da tag</em> e a <em>chave da tag</em>, é possível fazer referência ao valor que uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Tagging/Concepts/taggingoverview.htm>tag</a></em> específica possui.</li> </ul> </li> <li> <p><strong>resource.compartment.id</strong></p> <ul> <li>Especifica o compartimento onde o recurso reside.</li> </ul> </li> <li> <p><strong>resource.id</strong></p> <ul> <li>Especifica o <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em> do recurso.</li> </ul> </li> <li> <p><strong>resource.type</strong></p> <ul> <li>Especifica o tipo do recurso.</li> </ul> </li> </ul> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte a página <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Tagging/Concepts/taggingoverview.htm>"Visão Geral do Serviço Tagging"</a></em> para obter mais informações sobre o uso de <em>tags</em> em recursos.</p> </div> <p>Os operadores lógicos <strong><em>any (OR)</em></strong> e <strong><em>all (AND)</em></strong> podem ser utilizados para criar regras de correspondência em um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em>.</p> <p>Por exemplo, a imagem abaixo ilustra uma regra de correspondência de um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em> <strong><em>instances-dyngrp</em></strong>, que incluem as <em><a href=../../capitulo-6/ >instâncias de computação</a></em> de um compartimento específico <strong><em>(instance.compartment.id)</em></strong> ou <strong><em>(OR lógico)</em></strong>, uma única instância <strong><em>(instance.id)</em></strong>:</p> <p><img alt=alt_text src=../img/oci-dynagrp-1.png title="Grupos Dinâmico #1"></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Os nomes dos <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos Dinâmicos</a></em> devem ser exclusivos em todo o <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</p> </div> <p>A partir do <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em> que foi definido, podemos escrever uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>policy</a></em> que concede acesso total aos objetos do serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Object/Concepts/objectstorageoverview.htm>Object Storage</a></em> dentro do compartimento especificado:</p> <p><img alt=alt_text src=../img/oci-iam-policy-8.png title="IAM Policy - Exemplo #8"></p> <p>Em resumo, neste exemplo, a definição do <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em> e da <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/policieshow/Policy_Basics.htm>policy</a></em> associada permitem que qualquer <em><a href=../../capitulo-6/ >instância de computação</a></em> dentro do compartimento especificado, ou a instância identificada pelo seu <em><a href=../gerenciando-o-oci-atraves-do-oci-cli/#251-oracle-cloud-identifier-ocid>OCID</a></em>, manipule objetos do serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Object/Concepts/objectstorageoverview.htm>Object Storage</a></em> que estão armazenados no compartimento <em>cmp-prd:cmp-appl</em>.</p> <p>Para criar um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupo Dinâmico</a></em> através do <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em>, utilize como exemplo o seguinte comando:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1>1</a></span>
<span class=normal><a href=#__codelineno-14-2>2</a></span>
<span class=normal><a href=#__codelineno-14-3>3</a></span>
<span class=normal><a href=#__codelineno-14-4>4</a></span>
<span class=normal><a href=#__codelineno-14-5>5</a></span>
<span class=normal><a href=#__codelineno-14-6>6</a></span>
<span class=normal><a href=#__codelineno-14-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>dynamic-group<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a>&gt;<span class=w> </span>--name<span class=w> </span><span class=s2>&quot;instances-dyngrp&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a>&gt;<span class=w> </span>--description<span class=w> </span><span class=s2>&quot;Grupo dinâmico das instâncias de computação que usam o Object Storage.&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a>&gt;<span class=w> </span>--matching-rule<span class=w> </span><span class=s2>&quot;any {</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a><span class=s2>&gt; instance.compartment.id = &#39;ocid1.compartment.oc1..aaaaaavvvvvvvddddddddddd&#39;, </span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a><span class=s2>&gt; instance.id = &#39;ocid1.instance.oc1.sa-saopaulo-1.acccccvvvbbbbbbbbbbb&#39;}&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;ACTIVE&quot;</span>
</span></code></pre></div></td></tr></table></div> <h3 id=grupos-dinamicos-da-aplicacao-oci-pizza><strong>Grupos Dinâmicos da Aplicação OCI PIZZA</strong></h3> <p>O script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/dynamic-group.sh>scripts/capitulo-2/dynamic-group.sh</a></em></strong> contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>, inclui os <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Identity/Tasks/managingdynamicgroups.htm>Grupos Dinâmicos</a></em> utilizadas pela aplicação <strong>OCI PIZZA</strong>.</p> <h2 id=364-limites-e-cotas>3.6.4 Limites e Cotas</h2> <h3 id=limites><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/General/Concepts/servicelimits.htm>Limites</a></strong></h3> <p>Após a ativação da sua conta, o OCI estabelece um conjunto de limites para os recursos que você pode criar. Esses limites referem-se à quantidade máxima de recursos permitidos em seu <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>, e cada recurso ou serviço possui um limite específico. </p> <p>Por exemplo, o OCI estabelece um limite inicial de criação de até seis <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em> em todo o <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>, para contas que utilizam o modelo de cobrança <em><a href=../modelos-de-cobraca/#231-pay-as-you-go-payg-e-upfront-subscription>Pay As You Go</a></em> ou <em>Trial (contas para avaliação)</em>. Em contrapartida, para contas que operam sob o modelo <em><a href=../modelos-de-cobraca/#231-pay-as-you-go-payg-e-oracle-universal-credits-ouc>Oracle Universal Credits</a></em>, o limite inicial é de até dois mil <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Todos os limites iniciais para os diversos serviços, seja para contas que utilizam o modelo de cobrança <em><a href=../modelos-de-cobraca/#231-pay-as-you-go-payg-e-upfront-subscription>Pay As You Go</a></em>, <em>Trial</em> ou <em><a href=../modelos-de-cobraca/#231-pay-as-you-go-payg-e-oracle-universal-credits-ouc>Oracle Universal Credits</a></em>, podem ser consultados na documentação oficial do OCI em <em><a href=https://docs.oracle.com/pt-br/iaas/Content/General/Concepts/servicelimits.htm>"Limites do Serviço"</a></em>.</p> </div> <p>Para consultar o limite de um serviço específico utilizando o <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em>, é necessário, primeiramente, ter em mãos o <em>"Nome do Serviço"</em>, conforme demonstrado no comando a seguir:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1> 1</a></span>
<span class=normal><a href=#__codelineno-15-2> 2</a></span>
<span class=normal><a href=#__codelineno-15-3> 3</a></span>
<span class=normal><a href=#__codelineno-15-4> 4</a></span>
<span class=normal><a href=#__codelineno-15-5> 5</a></span>
<span class=normal><a href=#__codelineno-15-6> 6</a></span>
<span class=normal><a href=#__codelineno-15-7> 7</a></span>
<span class=normal><a href=#__codelineno-15-8> 8</a></span>
<span class=normal><a href=#__codelineno-15-9> 9</a></span>
<span class=normal><a href=#__codelineno-15-10>10</a></span>
<span class=normal><a href=#__codelineno-15-11>11</a></span>
<span class=normal><a href=#__codelineno-15-12>12</a></span>
<span class=normal><a href=#__codelineno-15-13>13</a></span>
<span class=normal><a href=#__codelineno-15-14>14</a></span>
<span class=normal><a href=#__codelineno-15-15>15</a></span>
<span class=normal><a href=#__codelineno-15-16>16</a></span>
<span class=normal><a href=#__codelineno-15-17>17</a></span>
<span class=normal><a href=#__codelineno-15-18>18</a></span>
<span class=normal><a href=#__codelineno-15-19>19</a></span>
<span class=normal><a href=#__codelineno-15-20>20</a></span>
<span class=normal><a href=#__codelineno-15-21>21</a></span>
<span class=normal><a href=#__codelineno-15-22>22</a></span>
<span class=normal><a href=#__codelineno-15-23>23</a></span>
<span class=normal><a href=#__codelineno-15-24>24</a></span>
<span class=normal><a href=#__codelineno-15-25>25</a></span>
<span class=normal><a href=#__codelineno-15-26>26</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a>$<span class=w> </span>oci<span class=w> </span>limits<span class=w> </span>service<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s1>&#39;data[*].{&quot;Descrição do Serviço&quot;: description, &quot;Nome do Serviço&quot;: name}&#39;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5></a>&gt;<span class=w> </span>--output<span class=w> </span>table
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6></a>+---------------------------------------+-----------------------------+
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7></a><span class=p>|</span><span class=w> </span>Descrição<span class=w> </span><span class=k>do</span><span class=w> </span>Serviço<span class=w>                  </span><span class=p>|</span><span class=w> </span>Nome<span class=w> </span><span class=k>do</span><span class=w> </span>Serviço<span class=w>             </span><span class=p>|</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8></a>+---------------------------------------+-----------------------------+
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9></a><span class=p>|</span><span class=w> </span>Application<span class=w> </span>Dependency<span class=w> </span>Management<span class=w>     </span><span class=p>|</span><span class=w> </span>adm<span class=w>                         </span><span class=p>|</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10></a><span class=p>|</span><span class=w> </span>Access<span class=w> </span>Governance<span class=w>                     </span><span class=p>|</span><span class=w> </span>agcs<span class=w>                        </span><span class=p>|</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Anomaly<span class=w> </span>Detection<span class=w>                  </span><span class=p>|</span><span class=w> </span>ai-anomaly-detection<span class=w>        </span><span class=p>|</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Document<span class=w>                           </span><span class=p>|</span><span class=w> </span>ai-document<span class=w>                 </span><span class=p>|</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Forecasting<span class=w>                        </span><span class=p>|</span><span class=w> </span>ai-forecasting<span class=w>              </span><span class=p>|</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14></a><span class=p>|</span><span class=w> </span>Generative<span class=w> </span>AI<span class=w>                         </span><span class=p>|</span><span class=w> </span>ai-generative<span class=w>               </span><span class=p>|</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Language<span class=w>                           </span><span class=p>|</span><span class=w> </span>ai-language<span class=w>                 </span><span class=p>|</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Speech<span class=w>                             </span><span class=p>|</span><span class=w> </span>ai-speech<span class=w>                   </span><span class=p>|</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17></a><span class=p>|</span><span class=w> </span>AI<span class=w> </span>Vision<span class=w>                             </span><span class=p>|</span><span class=w> </span>ai-vision<span class=w>                   </span><span class=p>|</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18></a><span class=p>|</span><span class=w> </span>Analytics<span class=w>                             </span><span class=p>|</span><span class=w> </span>analytics<span class=w>                   </span><span class=p>|</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19></a><span class=p>|</span><span class=w> </span>Announcements<span class=w>                         </span><span class=p>|</span><span class=w> </span>announcements<span class=w>               </span><span class=p>|</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20></a><span class=p>|</span><span class=w> </span>API<span class=w> </span>Gateway<span class=w>                           </span><span class=p>|</span><span class=w> </span>api-gateway<span class=w>                 </span><span class=p>|</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21></a><span class=p>|</span><span class=w> </span>Application<span class=w> </span>Performance<span class=w> </span>Monitoring<span class=w>    </span><span class=p>|</span><span class=w> </span>apm<span class=w>                         </span><span class=p>|</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22></a><span class=p>|</span><span class=w> </span>Application<span class=w> </span>Configuration<span class=w>             </span><span class=p>|</span><span class=w> </span>app-configuration<span class=w>           </span><span class=p>|</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23></a><span class=p>|</span><span class=w> </span>Account<span class=w> </span>Tracking<span class=w> </span>and<span class=w> </span>Automation<span class=w> </span>Tools<span class=w> </span><span class=p>|</span><span class=w> </span>atat<span class=w>                        </span><span class=p>|</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24></a><span class=p>|</span><span class=w> </span>Auto<span class=w> </span>Scaling<span class=w>                          </span><span class=p>|</span><span class=w> </span>auto-scaling<span class=w>                </span><span class=p>|</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25></a><span class=p>|</span><span class=w> </span>Autonomous<span class=w> </span>Recovery<span class=w> </span>Service<span class=w>           </span><span class=p>|</span><span class=w> </span>autonomous-recovery-service<span class=w> </span><span class=p>|</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26></a><span class=p>|</span><span class=w> </span>Big<span class=w> </span>Data<span class=w>                              </span><span class=p>|</span><span class=w> </span>big-data<span class=w>                    </span><span class=p>|</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O resultado do comando acima foi limitada devido à grande quantidade de serviços disponíveis no OCI. Você pode obter esse comando a partir do script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/all-services.sh>scripts/capitulo-2/all-services.sh</a></em></strong>, que está contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>.</p> </div> <p>Uma vez que você tenha o nome do serviço, é possível consultar os limites associados a ele:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1> 1</a></span>
<span class=normal><a href=#__codelineno-16-2> 2</a></span>
<span class=normal><a href=#__codelineno-16-3> 3</a></span>
<span class=normal><a href=#__codelineno-16-4> 4</a></span>
<span class=normal><a href=#__codelineno-16-5> 5</a></span>
<span class=normal><a href=#__codelineno-16-6> 6</a></span>
<span class=normal><a href=#__codelineno-16-7> 7</a></span>
<span class=normal><a href=#__codelineno-16-8> 8</a></span>
<span class=normal><a href=#__codelineno-16-9> 9</a></span>
<span class=normal><a href=#__codelineno-16-10>10</a></span>
<span class=normal><a href=#__codelineno-16-11>11</a></span>
<span class=normal><a href=#__codelineno-16-12>12</a></span>
<span class=normal><a href=#__codelineno-16-13>13</a></span>
<span class=normal><a href=#__codelineno-16-14>14</a></span>
<span class=normal><a href=#__codelineno-16-15>15</a></span>
<span class=normal><a href=#__codelineno-16-16>16</a></span>
<span class=normal><a href=#__codelineno-16-17>17</a></span>
<span class=normal><a href=#__codelineno-16-18>18</a></span>
<span class=normal><a href=#__codelineno-16-19>19</a></span>
<span class=normal><a href=#__codelineno-16-20>20</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a>$<span class=w> </span>oci<span class=w> </span>limits<span class=w> </span>value<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a>&gt;<span class=w> </span>--service-name<span class=w> </span><span class=s2>&quot;vpn&quot;</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a><span class=o>{</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=o>[</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a><span class=w>    </span><span class=o>{</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a><span class=w>      </span><span class=s2>&quot;availability-domain&quot;</span>:<span class=w> </span>null,
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a><span class=w>      </span><span class=s2>&quot;name&quot;</span>:<span class=w> </span><span class=s2>&quot;cpe-count&quot;</span>,
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10></a><span class=w>      </span><span class=s2>&quot;scope-type&quot;</span>:<span class=w> </span><span class=s2>&quot;REGION&quot;</span>,
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11></a><span class=w>      </span><span class=s2>&quot;value&quot;</span>:<span class=w> </span><span class=m>10</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12></a><span class=w>    </span><span class=o>}</span>,
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13></a><span class=w>    </span><span class=o>{</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14></a><span class=w>      </span><span class=s2>&quot;availability-domain&quot;</span>:<span class=w> </span>null,
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15></a><span class=w>      </span><span class=s2>&quot;name&quot;</span>:<span class=w> </span><span class=s2>&quot;ipsec-connection-count&quot;</span>,
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16></a><span class=w>      </span><span class=s2>&quot;scope-type&quot;</span>:<span class=w> </span><span class=s2>&quot;REGION&quot;</span>,
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17></a><span class=w>      </span><span class=s2>&quot;value&quot;</span>:<span class=w> </span><span class=m>4</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18></a><span class=w>    </span><span class=o>}</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19></a><span class=w>  </span><span class=o>]</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p>Neste caso, para o serviço de VPN que foi consultado, existem dois limites aplicáveis:</p> <ul> <li> <p><strong>cpe-count</strong></p> <ul> <li>Este limite indica que você pode ter até dez <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/configuringCPE.htm>Customer Premises Equipment (CPE)</a></em> em uma região específica. O CPE é um dispositivo que conecta sua rede local à rede do OCI, permitindo a comunicação entre os dois ambientes.</li> </ul> </li> <li> <p><strong>ipsec-connection-count</strong></p> <ul> <li>Este limite especifica que você pode ter até quatro conexões <em><a href=https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/overviewIPsec.htm>IPSec</a></em> em uma região. As conexões <em><a href=https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/overviewIPsec.htm>IPSec</a></em> são usadas para estabelecer uma conexão segura entre sua rede local e o OCI, utilizando criptografia para proteger os dados transmitidos.</li> </ul> </li> </ul> <h4 id=solicitando-aumento-dos-limites><strong><a href=https://support.oracle.com/knowledge/Oracle%20Cloud/2907244_1.html>Solicitando Aumento dos Limites</a></strong></h4> <p>Para solicitar aumento de limites para qualquer serviço do OCI, utilize a opção <strong><em>"Request a limit increase"</em></strong> da <em><a href=../acessando-o-oci/#web-console>Web Console</a></em> conforme demonstrado na figura abaixo:</p> <p><img alt=alt_text src=../img/oci-request-new-limits-1.png title="Solicitando Aumento dos Limites #1"> <br></p> <p>Após isso, você será direcionado para um assistente virtual, onde deverá clicar no botão <strong><em>"Limit Increase"</em></strong> em duas telas consecutivas:</p> <p><img alt=alt_text src=../img/oci-request-new-limits-2.png title="Solicitando Aumento dos Limites #2"> <br></p> <p>Um formulário será exibido, onde você deverá selecionar a categoria do serviço <strong><em>(Service Category)</em></strong>, o recurso ou item relacionado ao serviço <strong><em>(Resource)</em></strong>, o novo limite desejado para a região <strong><em>(sa-saopaulo-1 Region Limit)</em></strong>, e fornecer uma justificativa <strong><em>(Reason for request)</em></strong>. Em seguida, basta clicar no botão <strong><em>"Create Support Request"</em></strong>:</p> <p><img alt=alt_text src=../img/oci-request-new-limits-3.png title="Solicitando Aumento dos Limites #3"> <br></p> <p>Essa ação criará uma solicitação para a equipe do OCI, que, após análise, irá efetivar o novo valor solicitado. Toda a comunicação será realizada por meio do e-mail cadastrado do usuário que está solicitando o aumento do limite.</p> <h3 id=cotas><strong><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>Cotas</a></strong></h3> <p><em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>Cotas</a></em> ou <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>Cotas de Compartimento</a></em> são utilizadas para controlar a quantidade de recursos que podem ser criados dentro de um <em><a href=#compartimentos>compartimento</a></em>. As cotas de compartimento são semelhantes aos <em><a href=#limites>limites do serviço</a></em>, mas a principal diferença é que os <em><a href=#limites>limites do serviço</a></em> são estabelecidos pela Oracle, enquanto as <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>cotas de compartimento</a></em> são definidas pelos administradores do <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em> ou por qualquer outro usuário que possua privilégios adequados.</p> <p>De forma prática, você pode definir, por meio de <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>cotas</a></em>, o número máximo de <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em> que podem ser criadas no <em><a href=#compartimentos>compartimento</a></em> <em>cmp-appl</em>, por exemplo. Isso permite um controle eficaz sobre a utilização dos recursos dentro de um <em><a href=#compartimentos>compartimento</a></em>.</p> <p>Para definir cotas, utiliza-se uma linguagem declarativa própria, semelhante à utilizada nas políticas de acesso. Essa linguagem inclui três tipos de instruções que podem ser usadas. São elas:</p> <ul> <li> <p><strong>zero</strong></p> <ul> <li>Redefine todos os limites de cota de um recurso para zero.</li> </ul> </li> <li> <p><strong>unset</strong></p> <ul> <li>Redefine as cotas de volta para os limites do serviço padrão.</li> </ul> </li> <li> <p><strong>set</strong></p> <ul> <li>Define um número máximo de recursos que podem ser criados.</li> </ul> </li> </ul> <p>Por exemplo, o seguinte comando pode ser utilizado para restringir a criação de até oito <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em> com processadores do tipo E4 nas regiões <em>sa-saopaulo-1</em> ou <em>sa-vinhedo-1</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1>1</a></span>
<span class=normal><a href=#__codelineno-17-2>2</a></span>
<span class=normal><a href=#__codelineno-17-3>3</a></span>
<span class=normal><a href=#__codelineno-17-4>4</a></span>
<span class=normal><a href=#__codelineno-17-5>5</a></span>
<span class=normal><a href=#__codelineno-17-6>6</a></span>
<span class=normal><a href=#__codelineno-17-7>7</a></span>
<span class=normal><a href=#__codelineno-17-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a>$<span class=w> </span>oci<span class=w> </span>limits<span class=w> </span>quota<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span>ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class=s2>&quot; \</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><span class=s2>&gt; --name &quot;</span>container-instance-quota<span class=s2>&quot; \</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><span class=s2>&gt; --description &quot;</span>Cotas<span class=w> </span>para<span class=w> </span>os<span class=w> </span>serviços<span class=w> </span>Compute<span class=w> </span>Instances<span class=w> </span>e<span class=w> </span>Container<span class=w> </span>Instances.<span class=s2>&quot; \</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><span class=s2>&gt; --statements &quot;</span><span class=o>[</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6></a>&gt;<span class=w> </span><span class=s1>&#39;zero compute-core quota in tenancy&#39;</span>,<span class=w> </span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7></a>&gt;<span class=w> </span><span class=s1>&#39;set compute-core quota standard-e4-core-count to 8 in tenancy where any {request.region = sa-saopaulo-1, request.region = sa-vinhedo-1}&#39;</span><span class=o>]</span><span class=s2>&quot; \</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8></a><span class=s2>&gt; --wait-for-state &quot;</span>ACTIVE<span class=s2>&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>Observe que, para aplicar a <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>cota</a></em> de forma eficaz, inicialmente zeramos o limite utilizando a instrução <strong><em>zero</em></strong>. Em seguida, com a instrução <strong><em>set</em></strong>, definimos o valor do limite para um item específico, que neste caso é a CPU do tipo E4, identificada como <strong><em>standard-e4-core-count</em></strong>, pertencente à família do serviço <strong><em>compute-core</em></strong>.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>As cotas para o serviço de <em><a href=https://docs.oracle.com/pt-br/iaas/Content/container-instances/overview-of-container-instances.htm>Container Instances</a></em> pertencem à mesma família <strong><em>compute-core</em></strong> que as cotas do serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Compute/Concepts/computeoverview.htm>Compute Instances</a></em>.</p> </div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>A documentação disponível em <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas_topic-Available_Quotas_by_Service.htm>Cotas Disponíveis por Serviço</a></em> contém informações sobre todas as <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>cotas</a></em> disponíveis por serviço.</p> </div> <h4 id=cotas-da-aplicacao-oci-pizza><strong>Cotas da Aplicação OCI PIZZA</strong></h4> <p>O script <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac/blob/main/scripts/capitulo-2/quotas.sh>scripts/capitulo-2/quotas.sh</a></em></strong> contido no repositório <strong><em><a href=https://github.com/daniel-armbrust/ocipizza-iac>"ocipizza-iac"</a></em></strong>, contém as <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Quotas/Concepts/resourcequotas.htm>cotas</a></em> utilizadas pela aplicação <strong>OCI PIZZA</strong>.</p> <h2 id=365-gerenciamento-de-regioes>3.6.5 Gerenciamento de Regiões</h2> <p>Um <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em> dentro do modelo de cobrança <em><a href=../modelos-de-cobraca/#231-pay-as-you-go-payg-e-upfront-subscription>Pay As You Go</a></em> ou <em><a href=../modelos-de-cobraca/#233-free-tier-e-o-always-free>Free Tier</a></em> é restrito a uma única <em><a href=../introducao-ao-oci/#211-região>região</a></em>. Isso significa que, para utilizar outra <em><a href=../introducao-ao-oci/#211-região>região</a></em>, você precisará solicitar uma inscrição para essa nova <em><a href=../introducao-ao-oci/#211-região>região</a></em>.</p> <p>O comando abaixo solicita a inscrição na <em><a href=../introducao-ao-oci/#211-região>região</a></em> <em>"Sudeste do Brasil (Vinhedo)"</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-18-1> 1</a></span>
<span class=normal><a href=#__codelineno-18-2> 2</a></span>
<span class=normal><a href=#__codelineno-18-3> 3</a></span>
<span class=normal><a href=#__codelineno-18-4> 4</a></span>
<span class=normal><a href=#__codelineno-18-5> 5</a></span>
<span class=normal><a href=#__codelineno-18-6> 6</a></span>
<span class=normal><a href=#__codelineno-18-7> 7</a></span>
<span class=normal><a href=#__codelineno-18-8> 8</a></span>
<span class=normal><a href=#__codelineno-18-9> 9</a></span>
<span class=normal><a href=#__codelineno-18-10>10</a></span>
<span class=normal><a href=#__codelineno-18-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>region-subscription<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a>&gt;<span class=w> </span>--tenancy-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a>&gt;<span class=w> </span>--region-key<span class=w> </span><span class=s2>&quot;VCP&quot;</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a><span class=o>{</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=o>{</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a><span class=w>    </span><span class=s2>&quot;is-home-region&quot;</span>:<span class=w> </span>false,
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7></a><span class=w>    </span><span class=s2>&quot;region-key&quot;</span>:<span class=w> </span><span class=s2>&quot;VCP&quot;</span>,
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8></a><span class=w>    </span><span class=s2>&quot;region-name&quot;</span>:<span class=w> </span><span class=s2>&quot;sa-vinhedo-1&quot;</span>,
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9></a><span class=w>    </span><span class=s2>&quot;status&quot;</span>:<span class=w> </span><span class=s2>&quot;IN_PROGRESS&quot;</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10></a><span class=w>  </span><span class=o>}</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p>Observe que a região é especificada por meio de sua chave, que neste caso é <strong><em>VCP</em></strong>.</p> <p><img alt=alt_text src=../img/oci-iam-region-subscribe-1.png title="Chave da Região"></p> <p>Após alguns minutos, você poderá verificar que a região solicitada já está disponível para uso <strong><em>(STATUS: READY)</em></strong>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1> 1</a></span>
<span class=normal><a href=#__codelineno-19-2> 2</a></span>
<span class=normal><a href=#__codelineno-19-3> 3</a></span>
<span class=normal><a href=#__codelineno-19-4> 4</a></span>
<span class=normal><a href=#__codelineno-19-5> 5</a></span>
<span class=normal><a href=#__codelineno-19-6> 6</a></span>
<span class=normal><a href=#__codelineno-19-7> 7</a></span>
<span class=normal><a href=#__codelineno-19-8> 8</a></span>
<span class=normal><a href=#__codelineno-19-9> 9</a></span>
<span class=normal><a href=#__codelineno-19-10>10</a></span>
<span class=normal><a href=#__codelineno-19-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a>$<span class=w> </span>oci<span class=w> </span>iam<span class=w> </span>region-subscription<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a>&gt;<span class=w> </span>--tenancy-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a>&gt;<span class=w> </span>--query<span class=w> </span><span class=s1>&#39;data[*].{&quot;Nome da Região&quot;: &quot;region-name&quot;, &quot;Chave da Região&quot;: &quot;region-key&quot;, &quot;Status&quot;: status}&#39;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a>&gt;<span class=w> </span>--output<span class=w> </span>table
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6></a>+-----------------+----------------+--------+
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7></a><span class=p>|</span><span class=w> </span>Chave<span class=w> </span>da<span class=w> </span>Região<span class=w> </span><span class=p>|</span><span class=w> </span>Nome<span class=w> </span>da<span class=w> </span>Região<span class=w> </span><span class=p>|</span><span class=w> </span>Status<span class=w> </span><span class=p>|</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8></a>+-----------------+----------------+--------+
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9></a><span class=p>|</span><span class=w> </span>GRU<span class=w>             </span><span class=p>|</span><span class=w> </span>sa-saopaulo-1<span class=w>  </span><span class=p>|</span><span class=w> </span>READY<span class=w>  </span><span class=p>|</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10></a><span class=p>|</span><span class=w> </span>VCP<span class=w>             </span><span class=p>|</span><span class=w> </span>sa-vinhedo-1<span class=w>   </span><span class=p>|</span><span class=w> </span>READY<span class=w>  </span><span class=p>|</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11></a>+-----------------+----------------+--------+
</span></code></pre></div></td></tr></table></div> <h2 id=366-servico-audit>3.6.6 Serviço Audit</h2> <p>O <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Serviço Audit</a></em> registra automaticamente todas as chamadas e ações realizadas nas <em>APIs do OCI</em>, proporcionando um histórico detalhado das operações executadas em sua conta.</p> <p>Os eventos de log registrados pelo <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Serviço Audit</a></em> incluem todas as chamadas feitas as <em>APIs do OCI</em>, seja através do <em><a href=../acessando-o-oci/#web-console>Web Console</a></em>, <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em>, <em><a href=../acessando-o-oci/#oci-sdk-oci-software-development-kits>SDK</a></em> ou qualquer outra forma personalizada de interação com as <em>APIs REST</em> do OCI. Esses dados de eventos podem ser utilizados para realizar diagnósticos e monitorar atividades relacionadas à criação, exclusão ou modificação de qualquer recurso em seu <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>.</p> <p>Para ilustrar melhor o uso do <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Audit</a></em>, imagine que você deseja descobrir quem excluiu uma determinada <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/Overview_of_VCNs_and_Subnets.htm>VCN</a></em> do seu <em><a href=../capitulo-1/definicoes-nist.md#resource-pooling-agrupamento-de-recursos>Tenancy</a></em>. Como o <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Serviço Audit</a></em> fornece informações sobre as interações realizadas com as <em>APIs do OCI</em>, o primeiro passo é identificar o <strong><em>nome da ação</em></strong> que o <em><a href=../../capitulo-4/ >Serviço de Redes</a></em> utiliza para excluir uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/Overview_of_VCNs_and_Subnets.htm>VCN</a></em>.</p> <p>Os nomes das ações disponíveis para operações relacionadas a uma <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Network/Tasks/Overview_of_VCNs_and_Subnets.htm>VCN</a></em> podem ser encontrados diretamente na documentação <em><a href=https://docs.oracle.com/en-us/iaas/api/#/ >"API Reference and Endpoints"</a></em>:</p> <p><img alt=alt_text src=../img/oci-audit-1.png title="OCI Audit - Exemplo #1"> <br></p> <p>A maneira mais simples de visualizar os eventos registrados pelo <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Serviço Audit</a></em> é através do <em><a href=../acessando-o-oci/#web-console>Web Console</a></em>. Para isso, acesse o <em>"menu de hambúrguer"</em> e navegue até <strong><em>"Identity &amp; Security &gt; Audit"</em></strong>.</p> <p>Depois de identificar o <strong><em>nome da ação (DeleteVcn)</em></strong>, insira-o no campo <strong><em>Keywords</em></strong> do serviço <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Audit</a></em>. Como o serviço registra todas as interações com as <em>APIs</em>, você encontrará uma vasta quantidade de registros a serem analisados. Para este exemplo, vamos filtrar apenas as ocorrências do método <strong><em>HTTP DELETE</em></strong>, definindo um intervalo de datas e horários de início e fim mais restrito:</p> <p><img alt=alt_text src=../img/oci-audit-2.png title="OCI Audit - Exemplo #2"> <br></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>O OCI opera em <em><a href=https://pt.wikipedia.org/wiki/Tempo_Universal_Coordenado>UTC (Tempo Universal Coordenado)</a></em> para garantir consistência global, facilitando a integração entre sistemas em diferentes fusos horários e evitando confusões relacionadas à conversão de horários. Nos exemplos deste livro, o fuso horário utilizado é sempre GMT-3. Assim, um registro com o horário de 13:00 UTC corresponde a 10:00 em GMT-3.</p> </div> <p>Para cada resultado exibido, há um conjunto de informações que permite identificar o usuário que realizou a <strong><em>ação DeleteVcn</em></strong>:</p> <p><img alt=alt_text src=../img/oci-audit-3.png title="OCI Audit - Exemplo #3"></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte a documentação através do link <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Reference/logeventreference.htm>"Conteúdo de um Evento de Log de Auditoria"</a></em>, que apresenta o nome e a descrição de todos os campos registrados pelo <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Audit/Concepts/auditoverview.htm>Serviço Audit</a></em>.</p> </div> <p>É possível também obter os eventos pelo <em><a href=../acessando-o-oci/#oci-cli-oci-command-line-interface>OCI CLI</a></em> porém como já mencionado aqui, para consultas simples é mais fácil e prático consultar os dados pela <em><a href=../acessando-o-oci/#web-console>Web Console</a></em>.</p> <p>O comando abaixo lista todos os eventos dentro do intervalo de tempo especificado pelos parâmetros <strong><em>--start-time</em></strong> e <strong><em>--end-time</em></strong>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1>1</a></span>
<span class=normal><a href=#__codelineno-20-2>2</a></span>
<span class=normal><a href=#__codelineno-20-3>3</a></span>
<span class=normal><a href=#__codelineno-20-4>4</a></span>
<span class=normal><a href=#__codelineno-20-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a>$<span class=w> </span>oci<span class=w> </span>audit<span class=w> </span>event<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.tenancy.oc1..aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3></a>&gt;<span class=w> </span>--start-time<span class=w> </span><span class=s2>&quot;2025-04-04T10:00Z&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4></a>&gt;<span class=w> </span>--end-time<span class=w> </span><span class=s2>&quot;2025-04-04T11:00Z&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5></a>&gt;<span class=w> </span>--all
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>A data e a hora para consulta devem ser informadas em um dos formatos especificados na <em><a href=https://datatracker.ietf.org/doc/html/rfc3339>RFC 3339 - Date and Time on the Internet: Timestamps</a></em>.</p> </div> <p>Para o comando exibido, existe a opção <strong><em>--stream-output</em></strong>, que redireciona todo o resultado para o <em>stdout</em>. Como normalmente há uma grande quantidade de informações e eventos, essa opção é útil para direcionar o fluxo de dados para um <em><a href=https://docs.oracle.com/pt-br/iaas/Content/Streaming/Concepts/streamingoverview.htm>stream</a></em>, que pode, por exemplo, encaminhar as informações para um <em><a href=https://docs.oracle.com/pt-br/iaas/analytics-cloud/index.html>Serviço Analytics</a></em> usado para processar e visualizar os dados de forma mais eficaz. </p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Daniel Armbrust. Todos os direitos reservados. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.linkedin.com/in/daniel-armbrust/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>