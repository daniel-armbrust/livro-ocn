<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Guia Prático para Implantação de Aplicações Cloud Native na Oracle Cloud Infrastructure (OCI)."><meta name=author content="Daniel Armbrust (darmbrust@gmail.com)"><link href=https://ocn.dev.br/capitulo-6/entendendo-os-conteineres/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Capítulo 8: CaaS e FaaS - OCN - Oracle Cloud Native</title><link rel=stylesheet href=../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Open Sans";--md-code-font:"Red Hat Mono"}</style><link rel=stylesheet href=../../css/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#capitulo-8-caas-e-faas class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OCN - Oracle Cloud Native" class="md-header__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OCN - Oracle Cloud Native </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Capítulo 8: CaaS e FaaS </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange aria-label="Light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OCN - Oracle Cloud Native" class="md-nav__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> OCN - Oracle Cloud Native </label> <div class=md-nav__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prefacio/ class=md-nav__link> <span class=md-ellipsis> Prefácio </span> </a> </li> <li class=md-nav__item> <a href=../../sobre-o-autor/ class=md-nav__link> <span class=md-ellipsis> Sobre o Autor </span> </a> </li> <li class=md-nav__item> <a href=../../como-usar-este-livro/ class=md-nav__link> <span class=md-ellipsis> Como usar este Livro </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-1/ class=md-nav__link> <span class=md-ellipsis> Capítulo 1 - Introdução à Computação em Nuvem </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-2/ class=md-nav__link> <span class=md-ellipsis> Capítulo 2 - Aplicação OCI PIZZA </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-3/ class=md-nav__link> <span class=md-ellipsis> Capítulo 3 - OCI Foundations </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-4/ class=md-nav__link> <span class=md-ellipsis> Capítulo 4 - Serviços Auxiliares e Persistência de Dados </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-5/ class=md-nav__link> <span class=md-ellipsis> Capítulo 5 - Conectividade e Redes </span> </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Capítulo 6 - Contêineres, Docker e Funções </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-7/ class=md-nav__link> <span class=md-ellipsis> Capítulo 7 - Publicando a Aplicação na Web </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-8/ class=md-nav__link> <span class=md-ellipsis> Capítulo 8 - Oracle Kubernetes Engine (OKE) </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-9/ class=md-nav__link> <span class=md-ellipsis> Capítulo 9 - Serviço DevOps </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-10/ class=md-nav__link> <span class=md-ellipsis> Capítulo 10 - Monitoração e Observabilidade </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-11/ class=md-nav__link> <span class=md-ellipsis> Capítulo 11 - Infraestrutura como Código (IaC) </span> </a> </li> <li class=md-nav__item> <a href=../../apendice-a/ class=md-nav__link> <span class=md-ellipsis> Apêndice A - OCI HOWTOs </span> </a> </li> <li class=md-nav__item> <a href=../../bibliografia/ class=md-nav__link> <span class=md-ellipsis> Bibliografia </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> ChangeLog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=capitulo-8-caas-e-faas>Capítulo 8: CaaS e FaaS</h1> <h1 id=81-entendendo-os-conteineres>8.1 Entendendo os Contêineres</h1> <p>containers are the first-choice solution for most new applications.</p> <p>Definir contêineres de maneira concisa pode ser um desafio, pois abrange uma série de conceitos interconectados. Para tornar essa compreensão mais acessível, apresentarei alguns princípios fundamentais que esclarecerão o que são contêineres e como funcionam.</p> <p>Em 2006, foi quando o Google desenvolveu um projeto chamado Process Container que foi uma evolução em cima dos Jails de BSD ou Zonas do Solaris. Esse projeto foi depois renomeado para Control Groups ou CGROUPS. A ideia é fazer a Kernel do sistema operacional "mentir" para os processos de uma maneira em que dois processos podem rodar no mesmo sistema operacional porém um sem saber da existência um do outro. Isso é mais leve do ponto de vista de consumo de recursos computacionais pois, você está executando somente uma Kernel em vez de múltiplas Kernels virtualizadas.</p> <p>Em março de 2013, uma palestra relâmpago de 5 minutos chamada "O futuro dos contêineres Linux", apresentada por Solomon Hykes na PyCon, introduziu uma futura ferramenta de código aberto chamada "Docker" para criar e usar contêineres Linux. O Docker introduziu um nível de usabilidade aos contêineres Linux que os tornou acessíveis a mais usuários do que nunca, e a popularidade do Docker, e portanto dos contêineres Linux, disparou. Com o Docker tornando a abstração dos contêineres Linux acessível a todos, executar aplicativos de maneiras muito mais portáteis e repetíveis de repente se tornou possível, mas a questão da escala permaneceu.</p> <p>Em 2013 o <em><a href=https://en.wikipedia.org/wiki/Docker_(software)>Docker</a></em> é apresentado por <em><a href=https://fr.wikipedia.org/wiki/Solomon_Hykes>Solomon Hykes</a></em> na conferência <em><a href="https://youtu.be/3N3n9FzebAA?si=g6g9bRJYCVk64apa">dotScale em 2013</a></em> que inicialmente, era somente um conjunto de ferramentas que fazia uso do <em><a href=https://docs.oracle.com/en/operating-systems/oracle-linux/7/containers/lxc-ol7-containers.html>Linux Containers (LXC)</a></em> que tinha como objetivo executar de forma isolada as aplicações dentro do mesmo sistema operacional. </p> <p>Nesta época, o Google já estava usando contêiners a mais ou menos 15 anos porém através de ferramentas internas e proprietárias nas quais não eram divulgadas ao público.</p> <p>Antes do Docker, muitas empresas sabiam dos contêineres porém isso era secreto. Muitos engenheiros de software não sabiam disso na época. Isso só era utilizado em grandes empresas por debaixo dos panos como Google e Heroku, por exemplo.</p> <p>Antes do Docker, existiam diferentes ferramentas e frameworks proprietários no qual permitiam os desenvolvedores construir software local. Porém, o próximo passo era trazer o software, desenvolvido localmente, para a produção de um modo que ele poderia escalar.</p> <p>Docker tooling and experience popularized a brand-new cloud native approach to application packaging and maintenance. </p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Para ter uma noção da complexidade envolvida na criação de um contêiner manualmente, sem o uso do Docker, assista ao vídeo <em><a href="https://youtu.be/85k8se4Zo70?si=kWHQA8SQaHvkJobR">"Fábio Akita - Entendendo o Funcionamento de Containers"</a></em>.</p> </div> <p>Inicialmente o Docker era somente um conjunto de ferramentas que fazia uso do <em><a href=https://docs.oracle.com/en/operating-systems/oracle-linux/7/containers/lxc-ol7-containers.html>Linux Containers (LXC)</a></em>.</p> <p>A ideia de se utilizar e implementar contêineres afeta a forma como se cria software e distribuí software.</p> <p>A ideia de contêineres é executar programas dentro do mesmo sistema operacional. Docker não é full virtualization, não é paravirtualization e não é um hypervisor.</p> <p>Em 2013 surge o tal Docker que inicialmente usou o Linux Containers ou LXC. Docker não é full virtualization, não é paravirtualization e não é um hypervisor. Virtualização é literalmente falsificar o hardware físico. Nesse hardware virtual, você pode executar mutiplos e diferentes sistemas operacionais cada um contendo o seu próprio Kernel. A ideia toda, dos containers, é executar todos os programas dentro do mesmo sistema operacional.</p> <h2 id=812-processos>8.1.2 Processos</h2> <p>Programa é uma entidade passiva onde as suas instruções são armazenadas em disco. Pode-se dizer também que, um programa é um <em>arquivo executável</em>. </p> <p>Assim que o programa é executado pelo usuário, ele se transforma em uma entidade ativa, com suas instruções sendo processadas pela CPU do computador. Em outras palavras, o programa passa a ser considerado um processo.</p> <p>Em resumo, um processo é uma instância de um programa que está sendo executado.</p> <p>Todo processo possui um número único, denominado PID (Process Identifier ou Identificador de Processo), que é utilizado para sua identificação no sistema operacional. Além disso, os processos têm a capacidade de se comunicar entre si, acessar arquivos e até mesmo enviar dados pela rede.</p> <p><img alt=alt_text src=../img/processos-1.png title="Processos #1"></p> <p>Os contêineres, ou Software Containers, foram desenvolvidos como uma solução eficaz para isolar a execução de processos dentro de um sistema operacional. Além dessa capacidade de isolamento, todo o conteúdo de um contêiner pode ser compactado em um único arquivo tarball, resultando no que chamamos de imagem de contêiner. Essa imagem contém tudo o que é necessário para executar o aplicativo, incluindo bibliotecas, dependências e configurações, garantindo um ambiente consistente e portátil.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Isolar a execução de processos dentro de um mesmo sistema operacional não é uma ideia nova. Antes do surgimento dos contêineres, tecnologias como Solaris Zones e chroot já desempenhavam essa função, possibilitando a criação de ambientes isolados para a execução de aplicações.</p> </div> <p>Uma vez gerada, uma imagem de contêiner pode ser transportada e executada em qualquer ambiente que suporte a execução de contêineres. Em outras palavras, os contêineres permitem empacotar uma aplicação juntamente com todas as suas dependências (como frameworks, bibliotecas e arquivos de configuração) em um único <em>"pacote"</em>. Isso possibilita que esse pacote seja facilmente transferido e executado em plataformas como a <em>Oracle Cloud Infrastructure (OCI)</em>.</p> <p>Os contêineres revolucionaram o desenvolvimento de software ao oferecer agilidade e simplificar o empacotamento e a distribuição de aplicações. Todas as dependências necessárias para uma aplicação estão incluídas dentro do contêiner, resultando em um pacote autocontido. Isso permite que o mesmo software seja executado em diferentes ambientes (desenvolvimento, teste e produção) sem a necessidade de realizar qualquer modificação.</p> <h2 id=813-docker>8.1.3 Docker</h2> <p><img alt=alt_text src=../img/docker-logo-1.png title=Docker></p> <p>Docker é um conjunto de ferramentas desenvolvido para simplificar a criação, transporte e execução de contêineres. Ele utiliza funcionalidades do kernel do Linux, como namespaces e cgroups, para criar um <em>"espaço de trabalho isolado"</em> conhecido como contêiner. Essa abordagem permite que os desenvolvedores empacotem aplicações e suas dependências de maneira consistente, assegurando que funcionem de forma idêntica em diferentes ambientes.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Existem outras ferramentas disponíveis para criar e gerenciar contêineres, como o Podman, por exemplo. No entanto, o Docker continua sendo a ferramenta mais popular e amplamente utilizada no mercado.</p> </div> <p>Contêineres não são máquinas virtuais. Enquanto uma máquina virtual inclui um sistema operacional completo e inicializável, um contêiner opera dentro de um sistema operacional existente. Isso significa que um único sistema operacional pode executar múltiplos contêineres, que são significativamente mais leves do que máquinas virtuais completas. Essa leveza permite um uso mais eficiente dos recursos, resultando em tempos de inicialização mais rápidos e uma maior densidade de aplicações em um mesmo ambiente.</p> <h2 id=814-container-registry>8.1.4 Container Registry</h2> <p>O <em>Container Registry</em> é um serviço fundamental presenten no ecossistema de contêineres pois é ele quem permite armazenar, gerenciar e distribuir imagens de contêiner.</p> <p>O Container Registry atua como um repositório centralizado onde os desenvolvedores podem armazenar suas imagens de contêiner. Essa funcionalidade permite que as equipes compartilhem e reutilizem imagens de forma eficiente em diversos ambientes, como desenvolvimento, teste e produção.</p> <p>Além do <em>Docker Hub</em>, que é o maior registry público de imagens de contêiner, a Oracle também oferece o seu próprio registry público, acessível através do seguinte link:: <a href=https://container-registry.oracle.com/ >https://container-registry.oracle.com</a></p> <p><img alt=alt_text src=../img/oracle-container-registry-1.png title="Oracle Container Registry"></p> <p>Uma das vantagens do <a href=https://container-registry.oracle.com/ >Oracle Container Registry</a> em comparação com o <em>Docker Hub</em>, é que o <em>Docker Hub</em> impõe limites para o download das imagens que ele armazena (rate limits). Em contrapartida, o Oracle Container Registry não aplica essas restrições, permitindo que os desenvolvedores baixem imagens da Oracle à vontade, sem se preocupar com limitações de uso.</p> <p>Na aplicação <em>OCI Pizza</em>, foi utilizada como <em>imagem base</em> o <a href=https://container-registry.oracle.com/ords/ocr/ba/os/oraclelinux>Oracle Linux 8</a> na versão <em>slim</em>, que é uma imagem mais leve e compacta. Essa versão otimizada permite downloads e implantações mais ágeis, pois contém apenas os componentes essenciais do sistema operacional.</p> <p><img alt=alt_text src=../img/oracle-container-registry-2.png title="Oracle Linux 8 Slim"></p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Uma Docker Base Image (imagem base do Docker) é uma imagem de contêiner que serve como ponto de partida para a criação de outras imagens.</p> </div> <p>Para baixar a imagem <a href=https://container-registry.oracle.com/ords/ocr/ba/os/oraclelinux>Oracle Linux 8 Slim</a> localmente em sua máquina, basta executar o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a>$<span class=w> </span>docker<span class=w> </span>pull<span class=w> </span>container-registry.oracle.com/os/oraclelinux:8-slim
</span></code></pre></div></td></tr></table></div> <p>Com a <em>imagem baixada</em> localmente, é possível criar um contêiner e iniciar um shell a partir do ID dessa <em>imagem base</em>:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a>$<span class=w> </span>docker<span class=w> </span>images
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a>REPOSITORY<span class=w>                                     </span>TAG<span class=w>       </span>IMAGE<span class=w> </span>ID<span class=w>       </span>CREATED<span class=w>       </span>SIZE
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a>container-registry.oracle.com/os/oraclelinux<span class=w>   </span><span class=m>8</span>-slim<span class=w>    </span>95e2d27d5c61<span class=w>   </span><span class=m>2</span><span class=w> </span>weeks<span class=w> </span>ago<span class=w>   </span>115MB
</span></code></pre></div></td></tr></table></div> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>95e2d27d5c61<span class=w> </span>bash
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a>bash-4.4#<span class=w> </span>whoami
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a>root
</span></code></pre></div></td></tr></table></div> <h2 id=815-dockerfile>8.1.5 Dockerfile</h2> <p>O Dockerfile é um arquivo de texto que contém todas as instruções necessárias para construir uma imagem de contêiner. O Dockerfile da aplicação <em>OCI Pizza</em> inclui o seguinte conteúdo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span>
<span class=normal><a href=#__codelineno-3-11>11</a></span>
<span class=normal><a href=#__codelineno-3-12>12</a></span>
<span class=normal><a href=#__codelineno-3-13>13</a></span>
<span class=normal><a href=#__codelineno-3-14>14</a></span>
<span class=normal><a href=#__codelineno-3-15>15</a></span>
<span class=normal><a href=#__codelineno-3-16>16</a></span>
<span class=normal><a href=#__codelineno-3-17>17</a></span>
<span class=normal><a href=#__codelineno-3-18>18</a></span>
<span class=normal><a href=#__codelineno-3-19>19</a></span>
<span class=normal><a href=#__codelineno-3-20>20</a></span>
<span class=normal><a href=#__codelineno-3-21>21</a></span>
<span class=normal><a href=#__codelineno-3-22>22</a></span>
<span class=normal><a href=#__codelineno-3-23>23</a></span>
<span class=normal><a href=#__codelineno-3-24>24</a></span>
<span class=normal><a href=#__codelineno-3-25>25</a></span>
<span class=normal><a href=#__codelineno-3-26>26</a></span>
<span class=normal><a href=#__codelineno-3-27>27</a></span>
<span class=normal><a href=#__codelineno-3-28>28</a></span>
<span class=normal><a href=#__codelineno-3-29>29</a></span>
<span class=normal><a href=#__codelineno-3-30>30</a></span>
<span class=normal><a href=#__codelineno-3-31>31</a></span>
<span class=normal><a href=#__codelineno-3-32>32</a></span>
<span class=normal><a href=#__codelineno-3-33>33</a></span>
<span class=normal><a href=#__codelineno-3-34>34</a></span>
<span class=normal><a href=#__codelineno-3-35>35</a></span>
<span class=normal><a href=#__codelineno-3-36>36</a></span>
<span class=normal><a href=#__codelineno-3-37>37</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a>$<span class=w> </span>cat<span class=w> </span>webapp/Dockerfile
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=c1>#</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=c1># Dockerfile</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><span class=c1>#</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a>FROM<span class=w> </span>container-registry.oracle.com/os/oraclelinux:8-slim
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8></a>LABEL<span class=w> </span><span class=nv>maintainer</span><span class=o>=</span><span class=s2>&quot;Daniel Armbrust &lt;darmbrust@gmail.com&gt;&quot;</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9></a>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10></a>ENV<span class=w> </span><span class=nv>PYTHONDONTWRITEBYTECODE</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11></a>ENV<span class=w> </span><span class=nv>PYTHONUNBUFFERED</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12></a>ENV<span class=w> </span><span class=nv>FLASK_APP</span><span class=o>=</span>wsgi.py
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13></a>ENV<span class=w> </span><span class=nv>FLASK_DEBUG</span><span class=o>=</span><span class=m>0</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14></a>ENV<span class=w> </span><span class=nv>FLASK_ENV</span><span class=o>=</span>production
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15></a>ENV<span class=w> </span><span class=nv>STATIC_URL</span><span class=o>=</span>/static
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16></a>ENV<span class=w> </span><span class=nv>STATIC_PATH</span><span class=o>=</span>/var/www/ocipizza/app/static
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17></a>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18></a>WORKDIR<span class=w> </span>/var/www/ocipizza
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19></a>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20></a>COPY<span class=w> </span>requirements.txt<span class=w> </span>./
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21></a>COPY<span class=w> </span>docker-entrypoint.sh<span class=w> </span>./
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22></a>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23></a>RUN<span class=w> </span>microdnf<span class=w> </span>update<span class=w> </span>-y<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24></a><span class=w>    </span>microdnf<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>gcc<span class=w> </span>python38-devel<span class=w> </span>python3.8<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25></a><span class=w>    </span>python<span class=w> </span>-m<span class=w> </span>ensurepip<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26></a><span class=w>    </span>python<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>--no-cache-dir<span class=w> </span>--upgrade<span class=w> </span>pip<span class=w> </span>setuptools<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27></a><span class=w>    </span>python<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>--no-cache-dir<span class=w> </span>-r<span class=w> </span>requirements.txt<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28></a><span class=w>    </span>microdnf<span class=w> </span>clean<span class=w> </span>all<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>rm<span class=w> </span>-rf<span class=w> </span>/var/cache/yum
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29></a>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30></a>RUN<span class=w> </span>adduser<span class=w> </span>-l<span class=w> </span>-d<span class=w> </span>/var/www/ocipizza<span class=w> </span>webapp
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31></a>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32></a>COPY<span class=w> </span>--chown<span class=o>=</span>webapp:webapp<span class=w> </span>./ocipizza<span class=w> </span>/var/www/ocipizza/
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33></a>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34></a>USER<span class=w> </span>webapp
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35></a>EXPOSE<span class=w> </span><span class=m>5000</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36></a>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37></a>ENTRYPOINT<span class=w> </span><span class=o>[</span><span class=s2>&quot;./docker-entrypoint.sh&quot;</span><span class=o>]</span>
</span></code></pre></div></td></tr></table></div> <p>Abaixo, a explicação de alguns dos comandos existentes neste <em>Dockerfile</em>:</p> <ul> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#from>FROM</a> : Especifica a imagem base que será utilizada para criar uma nova imagem a partir dela. </p> </li> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#workdir>WORKDIR</a> : Durante o processo de construção da imagem, muda-se para o diretório especificado, estabelecendo-o como o novo diretório raiz de trabalho para a execução dos demais comandos.</p> </li> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#copy>COPY</a> : Copia arquivos ou diretórios do sistema de arquivos externo para dentro da imagem em construção.</p> </li> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#run>RUN</a> : Executa um comando como parte do processo de construção da imagem de contêiner.</p> </li> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#expose>EXPOSE</a> : Especifica a porta de rede que a aplicação irá expor. É importante ressaltar que esta instrução "não abre" efetivamente nenhuma porta; ela serve apenas como uma forma de documentar qual porta será exposta pelo contêiner.</p> </li> <li> <p><a href=https://docs.docker.com/engine/reference/builder/#entrypoint>ENTRYPOINT</a> : Define o comando que será executado quando o contêiner for criado e iniciado. No caso deste exemplo, trata-se de um shell script que iniciará a aplicação web.</p> </li> </ul> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte <a href=https://docs.docker.com/engine/reference/builder/ >Dockerfile reference</a> para um descrição de todos os comandos suportados.</p> </div> <p>Para criar a imagem da aplicação, navegue até diretório que contém o arquivo Dockerfile:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a>$<span class=w> </span><span class=nb>cd</span><span class=w> </span>webapp/
</span></code></pre></div></td></tr></table></div> <p>Em seguida, execute o comando abaixo e aguarde sua conclusão:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a>$<span class=w> </span>docker<span class=w> </span>build<span class=w> </span>-t<span class=w> </span>ocipizza:1.0<span class=w> </span>.
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Lembre-se de estar dentro do diretório onde encontra-se o arquivo <a href=https://docs.docker.com/engine/reference/builder/ >Dockerfile</a> para poder executar o comando docker build.</p> </div> <p>O parâmetro <em><strong>-t</strong> (ou --tag)</em> do comando <em>docker build</em>, é utilizado para atribuir uma <strong><em>tag</em></strong> a uma imagem Docker. Essa tag serve como um identificador, permitindo nomear e versionar a imagem. Isto também facilita o gerenciamento de diferentes versões.</p> <p>Por fim, é possível verificar que a imagem da aplicação foi criada com sucesso:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span>
<span class=normal><a href=#__codelineno-6-3>3</a></span>
<span class=normal><a href=#__codelineno-6-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a>$<span class=w> </span>docker<span class=w> </span>images
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a>REPOSITORY<span class=w>                                     </span>TAG<span class=w>       </span>IMAGE<span class=w> </span>ID<span class=w>       </span>CREATED<span class=w>         </span>SIZE
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a>ocipizza<span class=w>                                       </span><span class=m>1</span>.0<span class=w>       </span>5f3324071ab8<span class=w>   </span><span class=m>4</span><span class=w> </span>seconds<span class=w> </span>ago<span class=w>   </span>665MB
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a>container-registry.oracle.com/os/oraclelinux<span class=w>   </span><span class=m>8</span>-slim<span class=w>    </span>95e2d27d5c61<span class=w>   </span><span class=m>2</span><span class=w> </span>weeks<span class=w> </span>ago<span class=w>     </span>115MB
</span></code></pre></div></td></tr></table></div> <h2 id=816-oracle-cloud-infrastructure-registry-ocir>8.1.6 Oracle Cloud Infrastructure Registry (OCIR)</h2> <p>Já sabemos que o Container Registry é um repositório utilizado para armazenar imagens de contêineres. No contexto do OCI, temos o <a href=https://docs.oracle.com/en-us/iaas/Content/Registry/home.htm>Oracle Cloud Infrastructure Registry (OCIR)</a>, que é um serviço gerenciado especificamente para o armazenamento e gerenciamento de imagens de contêineres.</p> <p>O ideal é que todas as imagens de contêiner que serão implantadas e executadas por serviços no OCI, como o <a href=https://docs.oracle.com/en-us/iaas/Content/ContEng/Concepts/contengoverview.htm>OKE</a> ou <a href=https://docs.oracle.com/en-us/iaas/Content/container-instances/home.htm>Container Instances</a>, sejam previamente armazenadas no <a href=(https://docs.oracle.com/en-us/iaas/Content/Registry/home.htm)>OCIR</a>.</p> <p>Existem duas operações fundamentais relacionadas ao Container Registry:</p> <ul> <li> <p><strong>Push (Enviar)</strong></p> <ul> <li>Esta operação envolve o envio de uma imagem de contêiner ao Container Registry (upload).</li> </ul> </li> <li> <p><strong>Pull (Puxar)</strong></p> <ul> <li>Esta operação refere-se à recuperação de uma imagem de contêiner do Container Registry para implantação e uso (download).</li> </ul> </li> </ul> <p><img alt=alt_text src=../img/oracle-container-registry-3.png title="Oracle Container Registry"></p> <p>Antes de enviar a imagem por meio da operação <em>Push</em>, é necessário criar um <em>repositório</em>. O repositório servirá para armazenar diferentes versões de uma mesma imagem e pode ser configurado como <em>público</em> ou <em>privado</em>. Um <em>repositório privado</em> permite acesso apenas a partir dos recursos de uma VCN (Virtual Cloud Network), restringindo o acesso pela Internet.</p> <p>Para criar um repositório privado, utilize o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span>
<span class=normal><a href=#__codelineno-7-3>3</a></span>
<span class=normal><a href=#__codelineno-7-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a>$<span class=w> </span>oci<span class=w> </span>artifacts<span class=w> </span>container<span class=w> </span>repository<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.compartment.oc1..aaaaaaaaaaaaaaaabbbbbbbbccc&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a>&gt;<span class=w> </span>--display-name<span class=w> </span><span class=s2>&quot;ocipizza&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a>&gt;<span class=w> </span>--wait-for-state<span class=w> </span><span class=s2>&quot;AVAILABLE&quot;</span>
</span></code></pre></div></td></tr></table></div> <p>Uma vez criado o repositório, é necessário nomear ou taguear (docker tag), seguindo o padrão estabelecido pelo OCI, que deve obedecer ao seguinte formato:</p> <p><img alt=alt_text src=../img/oracle-container-registry-4.png title="Oracle Container Registry"></p> <ol> <li> <p><strong>registry-domain</strong>: É o hostname que identifica o serviço OCIR dentro de uma região.</p> </li> <li> <p><strong>tenancy-namespace</strong>: É uma string que identifica unicamente um tenancy no OCI.</p> </li> <li> <p><strong>repo-name</strong>: Nome exclusivo de um repositório de imagens no OCIR usado para armazenar diferentes versões de uma aplicação.</p> </li> <li> <p><strong>version</strong>: Identificador de versão de uma imagem.</p> </li> </ol> <p>Para obter o valor do <strong>tenancy-namespace</strong>, utilize o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span>
<span class=normal><a href=#__codelineno-8-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a>$<span class=w> </span>oci<span class=w> </span>os<span class=w> </span>ns<span class=w> </span>get
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=o>{</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=s2>&quot;grxmw2a9myyj&quot;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p>No caso da aplicação <em>OCI Pizza</em>, ela será implantada na região <strong>Brazil East (São Paulo)</strong>, que possui o identificador <strong>sa-saopaulo-1</strong>. Diante disso, a nova <em>tag</em> da aplicação é:</p> <p><img alt=alt_text src=../img/oracle-container-registry-5.png title="Oracle Container Registry"></p> <p>Para aplicar a nova <em>tag</em> à imagem existente <em>ocipizza:1.0</em>, utilize o seguinte comando:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a>$<span class=w> </span>docker<span class=w> </span>tag<span class=w> </span>ocipizza:1.0<span class=w> </span>ocir.sa-saopaulo-1.oci.oraclecloud.com/grxmw2a9myyj/ocipizza:1.0
</span></code></pre></div></td></tr></table></div> <p>Antes de executar o <em>push</em>, é necessário fazer o login no serviço OCIR da região onde as imagens da aplicação serão enviadas (sa-saopaulo-1):</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span>
<span class=normal><a href=#__codelineno-10-5>5</a></span>
<span class=normal><a href=#__codelineno-10-6>6</a></span>
<span class=normal><a href=#__codelineno-10-7>7</a></span>
<span class=normal><a href=#__codelineno-10-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a>$<span class=w> </span>docker<span class=w> </span>login<span class=w> </span>ocir.sa-saopaulo-1.oci.oraclecloud.com
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a>Username:<span class=w> </span>grxmw2a9myyj/darmbrust@gmail.com
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a>Password:
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a>WARNING!<span class=w> </span>Your<span class=w> </span>password<span class=w> </span>will<span class=w> </span>be<span class=w> </span>stored<span class=w> </span>unencrypted<span class=w> </span><span class=k>in</span><span class=w> </span>/home/darmbrust/.docker/config.json.
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a>Configure<span class=w> </span>a<span class=w> </span>credential<span class=w> </span>helper<span class=w> </span>to<span class=w> </span>remove<span class=w> </span>this<span class=w> </span>warning.<span class=w> </span>See
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a>https://docs.docker.com/engine/reference/commandline/login/#credentials-store
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a>Login<span class=w> </span>Succeeded
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Para efetuar o login no OCIR, é necessário possuir um nome de usuário válido, com as permissões adequadas, além de um <a href=https://docs.oracle.com/en-us/iaas/Content/Registry/Tasks/registrygettingauthtoken.htm>Auth Token</a> que funcionará como a senha desse usuário no serviço OCIR. Para obter informações detalhadas sobre como gerar um Auth Token, consulte o <a href=https://docs.oracle.com/en-us/iaas/Content/Registry/Tasks/registrygettingauthtoken.htm>link</a>.</p> </div> <p>Por último, executamos o <em>push</em> para enviar a imagem da aplicação ao OCIR:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a>$<span class=w> </span>docker<span class=w> </span>push<span class=w> </span>ocir.sa-saopaulo-1.oci.oraclecloud.com/grxmw2a9myyj/ocipizza:1.0
</span></code></pre></div></td></tr></table></div> <p>Para exibir todas as imagens do repositório <em>ocipizza</em>, execute o comando abaixo:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span>
<span class=normal><a href=#__codelineno-12-2>2</a></span>
<span class=normal><a href=#__codelineno-12-3>3</a></span>
<span class=normal><a href=#__codelineno-12-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a>$<span class=w> </span>oci<span class=w> </span>artifacts<span class=w> </span>container<span class=w> </span>image<span class=w> </span>list<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a>&gt;<span class=w> </span>--compartment-id<span class=w> </span><span class=s2>&quot;ocid1.compartment.oc1..aaaaaaaaaaaaaaaabbbbbbbbccc&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a>&gt;<span class=w> </span>--all<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a>&gt;<span class=w> </span>--repository-name<span class=w> </span><span class=s2>&quot;ocipizza&quot;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=817-habilitando-o-scan-de-vulnerabilidades>8.1.7 Habilitando o Scan de Vulnerabilidades</h2> <p>Allow service vulnerability-scanning-service to read compartments in tenancy Allow service vulnerability-scanning-service to read repos in tenancy</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Daniel Armbrust. Todos os direitos reservados. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.linkedin.com/in/daniel-armbrust/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>