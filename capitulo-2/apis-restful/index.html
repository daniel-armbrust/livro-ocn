<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Guia Prático para Implantação de Aplicações Cloud Native na Oracle Cloud Infrastructure (OCI)."><meta name=author content="Daniel Armbrust (darmbrust@gmail.com)"><link href=https://ocn.dev.br/capitulo-2/apis-restful/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Capítulo 2: Aplicação OCI PIZZA - OCN - Oracle Cloud Native</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Open Sans";--md-code-font:"Red Hat Mono"}</style><link rel=stylesheet href=../../css/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#capitulo-2-aplicacao-oci-pizza class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OCN - Oracle Cloud Native" class="md-header__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OCN - Oracle Cloud Native </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Capítulo 2: Aplicação OCI PIZZA </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange aria-label="Light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OCN - Oracle Cloud Native" class="md-nav__button md-logo" aria-label="OCN - Oracle Cloud Native" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> OCN - Oracle Cloud Native </label> <div class=md-nav__source> <a href=https://github.com/daniel-armbrust/livro-ocn title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../prefacio/ class=md-nav__link> <span class=md-ellipsis> Prefácio </span> </a> </li> <li class=md-nav__item> <a href=../../sobre-o-autor/ class=md-nav__link> <span class=md-ellipsis> Sobre o Autor </span> </a> </li> <li class=md-nav__item> <a href=../../como-usar-este-livro/ class=md-nav__link> <span class=md-ellipsis> Como usar este Livro </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-1/ class=md-nav__link> <span class=md-ellipsis> Capítulo 1 - Introdução à Computação em Nuvem </span> </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Capítulo 2 - Aplicação OCI PIZZA </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-3/ class=md-nav__link> <span class=md-ellipsis> Capítulo 3 - OCI Foundations </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-4/ class=md-nav__link> <span class=md-ellipsis> Capítulo 4 - Serviços Auxiliares e Persistência de Dados </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-5/ class=md-nav__link> <span class=md-ellipsis> Capítulo 5 - Conectividade e Redes </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-6/ class=md-nav__link> <span class=md-ellipsis> Capítulo 6 - Contêineres, Docker e Funções </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-7/ class=md-nav__link> <span class=md-ellipsis> Capítulo 7 - Publicando a Aplicação na Web </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-8/ class=md-nav__link> <span class=md-ellipsis> Capítulo 8 - Oracle Kubernetes Engine (OKE) </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-9/ class=md-nav__link> <span class=md-ellipsis> Capítulo 9 - Serviço DevOps </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-10/ class=md-nav__link> <span class=md-ellipsis> Capítulo 10 - Monitoração e Observabilidade </span> </a> </li> <li class=md-nav__item> <a href=../../capitulo-11/ class=md-nav__link> <span class=md-ellipsis> Capítulo 11 - Infraestrutura como Código (IaC) </span> </a> </li> <li class=md-nav__item> <a href=../../apendice-a/ class=md-nav__link> <span class=md-ellipsis> Apêndice A - OCI HOWTOs </span> </a> </li> <li class=md-nav__item> <a href=../../bibliografia/ class=md-nav__link> <span class=md-ellipsis> Bibliografia </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> ChangeLog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=capitulo-2-aplicacao-oci-pizza>Capítulo 2: Aplicação OCI PIZZA</h1> <h1 id=24-apis-restful>2.4 APIs RESTful</h1> <h2 id=241-o-que-e-uma-api>2.4.1 O que é uma API?</h2> <p>A <em><a href=https://pt.wikipedia.org/wiki/Interface_de_programa%C3%A7%C3%A3o_de_aplica%C3%A7%C3%B5es>API (Application Programming Interface)</a></em>, ou <em><a href=https://pt.wikipedia.org/wiki/Interface_de_programa%C3%A7%C3%A3o_de_aplica%C3%A7%C3%B5es>Interface de Programação de Aplicativos</a></em>, é um <em>conjunto de regras</em> e <em>protocolos</em> que possibilita a comunicação e a troca de dados entre diferentes aplicações, mesmo quando desenvolvidas usando diferentes tecnologias. </p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Nem toda API é uma API web, e existem diversas variações que utilizam diferentes protocolos e tecnologias, como <em><a href=https://pt.wikipedia.org/wiki/SOAP>SOAP (Simple Object Access Protocol)</a></em>, APIs que realizam chamadas de procedimento remoto <em>(RPC - Remote Procedure Calls)</em>, entre outras. Nesta seção, o foco será explicar as APIs web que utilizam o protocolo <em><a href=https://en.wikipedia.org/wiki/HTTP>HTTP</a></em> e que seguem os princípios do <em>REST</em>.</p> </div> <p>Duas palavras-chave que ajudam a definir o papel das APIs são:</p> <ul> <li> <p><strong>Conjunto de Regras</strong></p> <ul> <li>Está relacionado ao <em>contrato de comunicação</em> da API, ou sua <em>interface</em>, que define basicamente detalhes como os endpoints utilizados na comunicação, o formato das requisições e respostas, os tipos de dados e as informações sobre autenticação. Esse contrato é indispensável para os desenvolvedores, pois fornece uma especificação clara que facilita a compreensão de como a API deve ser utilizada.</li> </ul> </li> <li> <p><strong>Protocolo</strong></p> <ul> <li>Os computadores utilizam protocolos para se comunicar. Um protocolo é um conjunto de regras que deve ser seguido para que a troca de informações ocorra. No caso da aplicação <strong>OCI PIZZA</strong>, as funcionalidades disponíveis por meio das APIs utilizam o protocolo <em><a href=https://en.wikipedia.org/wiki/HTTP>HTTP</a></em>. </li> </ul> </li> </ul> <p>APIs são utilizadas para expor uma ou mais funcionalidades de uma aplicação, permitindo que essas funcionalidades sejam acessadas por outras aplicações por meio de uma interface simples, ao mesmo tempo em que ocultam os detalhes complexos da implementação.</p> <p>Uma outra forma de entender o que é uma API é considerar que nós, humanos, dependemos de interfaces gráficas para interagir e trocar dados com as aplicações que usamos, enquanto as próprias aplicações utilizam APIs para facilitar a troca de informações entre si.</p> <p>Atualmente, muitas aplicações web são desenvolvidas usando o conceito <em>API First</em>, o que permite a separação entre as camadas de frontend e backend. Isso significa que é possível, por exemplo, criar uma interface gráfica utilizando <em>HTML</em>, <em>CSS</em> e <em>JavaScript</em>, e uma aplicação móvel nativa para <em><a href=https://pt.wikipedia.org/wiki/Android>Android</a></em> desenvolvida em <em><a href=https://www.java.com/en/ >Java</a></em> ou <em><a href=https://kotlinlang.org/ >Kotlin</a></em>, onde ambas utilizam o mesmo conjunto de APIs do backend.</p> <p>Por fim, as APIs facilitam a integração entre diferentes sistemas e, no caso da aplicação <strong>OCI PIZZA</strong>, uma plataforma como o <em><a href=https://www.ifood.com.br/ >iFood</a></em> pode utilizar suas APIs para permitir que os usuários façam pedidos diretamente pelo aplicativo do <em><a href=https://www.ifood.com.br/ >iFood</a></em>, sem a necessidade de acessar a interface web da aplicação <strong>OCI PIZZA</strong>.</p> <p><img alt=alt_text src=../img/apis-1.png title="APIs #1"></p> <h2 id=242-recursos-e-representacoes>2.4.2 Recursos e Representações</h2> <p>Recursos são os elementos fundamentais dos sistemas web, a ponto de as aplicações web serem frequentemente classificadas como <em>"aplicações orientadas a recursos"<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup></em>. Um recurso pode ser qualquer item disponibilizado por um servidor web, como um documento HTML, um documento PDF, um vídeo, um processo de negócio, um dispositivo, entre outros.</p> <p>Um recurso pode ser entendido como sendo a representação de um elemento do mundo real dentro de um contexto computacional. Exemplos de recursos da aplicação <strong>OCI PIZZA</strong> incluem: <code>Pizza</code>, <code>Pessoa</code> ou <code>Pedido</code>.</p> <p>Recursos que são disponibilizados por um servidor web possuem uma ou mais formas de <em>representações</em>. O recurso <code>Pizza</code> dentro do contexto da aplicação <strong>OCI PIZZA</strong>, é representado da seguinte forma:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a>$<span class=w> </span>curl<span class=w> </span>https://api.ocipizza.com.br/pizzas/5
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=o>{</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=o>{</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=s2>&quot;description&quot;</span>:<span class=w> </span><span class=s2>&quot;presunto coberto com mussarela, milho, ervilha, palmito, ovo e cebola.&quot;</span>,
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>    </span><span class=s2>&quot;id&quot;</span>:<span class=w> </span><span class=m>5</span>,
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>    </span><span class=s2>&quot;image&quot;</span>:<span class=w> </span><span class=s2>&quot;https://objectstorage.sa-saopaulo-1.oraclecloud.com/n/we1rxz34/b/pizza-img/o/pizza-portuguesa.jpg&quot;</span>,
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>    </span><span class=s2>&quot;name&quot;</span>:<span class=w> </span><span class=s2>&quot;portuguesa&quot;</span>,
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>    </span><span class=s2>&quot;price&quot;</span>:<span class=w> </span><span class=s2>&quot;54.99&quot;</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>  </span><span class=o>}</span>,
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>  </span><span class=s2>&quot;message&quot;</span>:<span class=w> </span><span class=s2>&quot;null&quot;</span>,
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>  </span><span class=s2>&quot;status&quot;</span>:<span class=w> </span><span class=s2>&quot;success&quot;</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <p><code>Pizza</code> é, na verdade, um objeto que possui algumas propriedades que o descrevem. No exemplo acima, uma <code>Pizza</code> é representada através de um documento do tipo <em><a href=https://pt.wikipedia.org/wiki/JSON>JSON</a></em>. No entanto, nada impede que esse objeto seja representado também em formatos como <em><a href=https://pt.wikipedia.org/wiki/XML>XML</a></em> ou <em><a href=https://pt.wikipedia.org/wiki/HTML>HTML</a></em>, por exemplo. A escolha do formato dependerá de como você decide implementar as representações dos seus recursos.</p> <p>Os recursos representados pela aplicação <strong>OCI PIZZA</strong> seguem a especificação <em><a href=https://github.com/omniti-labs/jsend>JSend</a></em>, que estabelece diretrizes sobre como as respostas <em><a href=https://pt.wikipedia.org/wiki/JSON>JSON</a></em> devem ser formatadas. O <em><a href=https://github.com/omniti-labs/jsend>JSend</a></em> é fácil de implementar e proporciona um formato que considero elegante e de fácil interpretação para as aplicações consumidoras.</p> <p>Toda resposta de uma aplicação que segue a especificação <em><a href=https://github.com/omniti-labs/jsend>JSend</a></em> inclui os seguintes campos:</p> <ul> <li> <p><strong>data</strong></p> <ul> <li>Campo que contém os dados da resposta à solicitação. Este campo pode incluir uma lista de objetos, um único objeto ou o valor <code>null</code>, que indica a ausência de dados.</li> </ul> </li> <li> <p><strong>status</strong></p> <ul> <li><code>success</code>: indica que a solicitação foi processada com êxito.</li> <li><code>fail</code>: indica uma falha no processamento da solicitação, geralmente relacionada a dados inválidos fornecidos pelo cliente.</li> <li><code>error</code>: indica uma exceção que impede o servidor de processar a solicitação.</li> </ul> </li> <li> <p><strong>message</strong></p> <ul> <li>Mensagem descritiva que indica o motivo da falha, seja ela do tipo <code>fail</code> ou <code>error</code>. No caso de <code>success</code>, o campo <code>status</code> geralmente é <code>null</code>, indicando a ausência de uma mensagem.</li> </ul> </li> </ul> <p>Por exemplo, ao tentar recuperar um <em><a href=https://pt.wikipedia.org/wiki/C%C3%B3digo_de_Endere%C3%A7amento_Postal>CEP</a></em> inválido da aplicação <strong>OCI PIZZA</strong>, obtemos o seguinte erro:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span>
<span class=normal><a href=#__codelineno-1-4>4</a></span>
<span class=normal><a href=#__codelineno-1-5>5</a></span>
<span class=normal><a href=#__codelineno-1-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a>$<span class=w> </span>curl<span class=w> </span>http://api.ocipizza.com.br/locations/zipcodes/0395381
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=o>{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w>  </span><span class=s2>&quot;data&quot;</span>:<span class=w> </span><span class=s2>&quot;null&quot;</span>,
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w>  </span><span class=s2>&quot;message&quot;</span>:<span class=w> </span><span class=s2>&quot;Cannot find state and city from zipcode.&quot;</span>,
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>  </span><span class=s2>&quot;status&quot;</span>:<span class=w> </span><span class=s2>&quot;fail&quot;</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte o link <em><a href=https://github.com/omniti-labs/jsend>JSend</a></em> para mais informações sobre essa especificação.</p> </div> <h2 id=243-rest>2.4.3 REST</h2> <p>Agora que entendemos o que é uma API, bem como os conceitos sobre <em>recursos</em> e <em>representações</em>, podemos avançar para compreender o que é <em><a href=https://pt.wikipedia.org/wiki/REST>REST</a></em>.</p> <p>Definido por <em><a href=https://en.wikipedia.org/wiki/Roy_Fielding>Roy Thomas Fielding</a></em> em sua <em><a href=https://ics.uci.edu/~fielding/pubs/dissertation/top.htm>tese de Ph.D.</a></em>, <em><a href=https://pt.wikipedia.org/wiki/REST>REST</a></em>, que significa <em><a href=https://pt.wikipedia.org/wiki/REST>REpresentational State Transfer (Transferência de Estado Representacional)</a></em>, não é uma tecnologia e não é um protocolo, mas sim um <em>estilo arquitetural</em> que orienta o design de APIs para serviços <em>web modernos (web services)</em>. Uma API que segue as especificações desse estilo arquitetural é chamada de <em><a href=https://pt.wikipedia.org/wiki/REST>REST API</a></em>. </p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Um <em>web service</em> é considerado <em>RESTful</em> quando todas as suas APIs estão em conformidade com os princípios e restrições <em><a href=https://pt.wikipedia.org/wiki/REST>REST</a></em>.</p> </div> <p>O significado de cada palavra do acrônimo <em><a href=https://pt.wikipedia.org/wiki/REST>REST</a></em> é detalhado a seguir:</p> <ul> <li> <p><strong>Transferência</strong></p> <ul> <li>Refere-se ao processo de enviar e receber as representações dos recursos através da rede. Essa transferência ocorre por meio de chamadas que utilizam o protocolo HTTP.</li> </ul> </li> <li> <p><strong>Estado</strong></p> <ul> <li>Refere-se a condição atual do recurso naquele instante de tempo. Quando um cliente interage com um recurso, ele pode, desde que tenha a devida autorização, modificar seu estado (por exemplo, atualizar o valor da <code>Pizza</code>).</li> </ul> </li> <li> <p><strong>Representacional</strong></p> <ul> <li>Refere-se à forma como um recurso é apresentado ou representado para o mundo externo. Por exemplo, o recurso <code>Pizza</code> pode ser representado por meio de um documento JSON.</li> </ul> </li> </ul> <p><em><a href=https://pt.wikipedia.org/wiki/REST>REST</a></em> define <em>seis características arquiteturais</em> que devem ser seguidas na construção de APIs. Essas características são essenciais para que uma API seja considerada <em>"verdadeiramente RESTful"</em>. Sistemas que incorporam todos esses princípios são classificados como <em>RESTful</em>, exceto pela sexta característica, que é opcional. </p> <p>As seis características são:</p> <ul> <li> <p><strong>1. Client-Server (cliente-servidor)</strong></p> <ul> <li>Servidores e clientes podem ser desenvolvidos ou substituídos de forma independente, sem qualquer dependência entre si. Isso significa que tanto o cliente quanto o servidor têm suas próprias responsabilidades. Por exemplo, o servidor pode "comunicar-se" com o cliente sem se preocupar com a experiência do usuário. O cliente, por sua vez, precisa conhecer apenas as <em><a href=https://pt.wikipedia.org/wiki/URI>URIs</a></em> dos recursos disponibilizados pelo servidor.</li> </ul> </li> <li> <p><strong>2. Stateless (sem estado)</strong></p> <ul> <li>O HTTP é um protocolo que funciona com um modelo de requisição e resposta. Isso significa que o cliente envia uma requisição e o servidor responde com base nessa solicitação. O REST estabelece que o ciclo de requisição/resposta deve ser autônomo, ou seja, uma resposta não deve depender de informações previamente armazenadas pelo cliente. Em outras palavras, cada requisição deve ser tratada como uma nova solicitação, sem histórico, e o servidor não precisa e nem deve reter nenhuma informação do cliente para concluir o ciclo de requisição/resposta.</li> </ul> </li> <li> <p><strong>3. Cacheable (cache)</strong></p> <ul> <li>Em REST, o cache deve ser aplicado apenas aos recursos que explicitamente indicam que podem ser armazenados em cache. Por exemplo, respostas que contenham instruções no cabeçalho HTTP como <code>Cache-Control: public, max-age=86400</code>, indicam que essas respostas podem ser armazenadas em cache pelo cliente. Usar cache melhora o desempenho, pois os dados armazenados em cache podem ser acessados mais rapidamente do que ao consultar um servidor remoto.</li> </ul> </li> <li> <p><strong>4. Uniform interface (interface uniforme)</strong></p> <ul> <li>Pode ser considerado um dos aspectos mais importantes, pois estabelece o <em>contrato</em> entre cliente e servidor. O termo <em>"contrato"</em> refere-se à interface da API que você cria para seus recursos, bem como à forma padronizada que os dados devem assumir. Todos os recursos expostos devem ser manipuláveis e acessíveis exclusivamente por meio dos métodos conhecidos do protocolo <em>HTTP (GET, POST, PUT, etc.)</em>. Além disso, é fundamental que os recursos expostos sigam algumas boas práticas relacionadas à nomenclatura, formatos de URL e formatos de dados, como HTML, XML e/ou JSON.</li> </ul> </li> <li> <p><strong>5. Layered system (sistema em camadas)</strong></p> <ul> <li>O REST possibilita a implementação de uma arquitetura em camadas, onde as APIs podem ser hospedadas em um <em>servidor A</em>, os dados armazenados em um <em>servidor B</em> e a autenticação das solicitações realizada por um <em>servidor C</em>, por exemplo. Geralmente, o cliente não consegue identificar se está se comunicando diretamente com o servidor final ou se está passando por um intermediário durante o processo.</li> </ul> </li> <li> <p><strong>6. Code on demand (código sob demanda)</strong></p> <ul> <li>Essa é uma restrição opcional que permite ao servidor enviar trechos de código para o cliente executar. Essa ideia se torna mais clara quando consideramos o funcionamento dos <em><a href=https://en.wikipedia.org/wiki/Java_applet>Applets Java</a></em>, onde um código ou uma pequena aplicação desenvolvida em Java, chamada de <em><a href=https://en.wikipedia.org/wiki/Java_applet>Applet</a></em>, é transmitida do servidor para o cliente executar. </li> </ul> </li> </ul> <h2 id=244-apis-da-aplicacao-oci-pizza>2.4.4 APIs da aplicação OCI PIZZA</h2> <p>Toda a lógica da aplicação foi organizada em diferentes módulos, cada um responsável por uma funcionalidade específica. Por exemplo, o módulo <code>pizza</code> não apenas exibe o cardápio de pizzas, mas também permite a manipulação de suas informações.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Um módulo é um diretório que contém arquivos <em><a href=https://www.python.org/ >Python</a></em>. Dividir uma aplicação em módulos é uma prática recomendada que melhora a organização, a manutenção e a escalabilidade do código.</p> </div> <p>Os módulos da aplicação <strong>OCI PIZZA</strong> são organizados por meio de <em><a href=https://flask.palletsprojects.com/en/stable/blueprints/ >Blueprints</a></em>. Um <em><a href=https://flask.palletsprojects.com/en/stable/blueprints/ >Blueprints</a></em>, em <em><a href=https://flask.palletsprojects.com/en/stable/ >Flask</a></em>, é uma maneira de organizar uma aplicação em componentes menores como se fossem mini-aplicações.</p> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Consulte <em><a href=https://flask.palletsprojects.com/en/stable/blueprints/ >"Modular Applications with Blueprints"</a></em> para obter mais informações sobre <em><a href=https://flask.palletsprojects.com/en/stable/blueprints/ >Blueprints</a></em> em <em><a href=https://flask.palletsprojects.com/en/stable/ >Flask</a></em>.</p> </div> <p>Na aplicação <strong>OCI PIZZA</strong>, cada módulo é organizado em duas partes principais:</p> <ul> <li> <p><strong>HTML Views</strong></p> <ul> <li>Contém o código que é responsável por gerar o conteúdo HTML para os usuários. Toda a lógica das <em>HTML Views</em> está centralizada no arquivo <code>views.py</code> de cada módulo.</li> </ul> </li> <li> <p><strong>API REST</strong></p> <ul> <li>Contém o código que expõe as <em>APIs REST</em> do módulo. A lógica relacionada às <em>APIs REST</em> estão contidas no arquivo <code>api.py</code> de cada módulo.</li> </ul> </li> </ul> <p><img alt=alt_text src=../img/view-html-api-1.png title="HTML, API # 1"></p> <h3 id=apis-rest><strong>APIs REST</strong></h3> <p>REST especifica algumas boas práticas utilizando os mecanismos do HTTP para construção de APIs, como por exemplo, CRUD APIs que especificam como os clientes podem realizar operações de criação, leitura, atualização e exclusão utilizando os verbos HTTP:</p> <table> <thead> <tr> <th>CRUD</th> <th>Verbo HTTP</th> <th>Descrição</th> </tr> </thead> <tbody> <tr> <td>C (Create)</td> <td>POST</td> <td>Cria um novo recurso.</td> </tr> <tr> <td>R (Read)</td> <td>GET</td> <td>Recupera os dados de um recurso existente.</td> </tr> <tr> <td>U (Update)</td> <td>PUT,PATCH</td> <td>Atualiza os dados de um recurso existente.</td> </tr> <tr> <td>D (Delete)</td> <td>DELETE</td> <td>Remove um recurso.</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>NOTA</p> <p>Há uma diferença entre PUT e PATCH onde o verbo PUT é utilizado para substituír o recurso por completo com novos valores. Já o verbo PATCH é usado para atualizar propriedades individuais de um recurso.</p> </div> <p><strong>Pizza</strong></p> <table> <thead> <tr> <th>Método</th> <th>Endpoint</th> <th>Descrição</th> <th>Protegido</th> </tr> </thead> <tbody> <tr> <td>GET</td> <td>/pizzas</td> <td>Lista todas as pizzas</td> <td>Não</td> </tr> <tr> <td>GET</td> <td>/pizzas/{pizza_id}</td> <td>Obtém os detalhes de uma pizza específica</td> <td>Não</td> </tr> <tr> <td>POST</td> <td>/pizzas</td> <td>Adiciona uma nova pizza</td> <td>Sim (Admin)</td> </tr> <tr> <td>PUT</td> <td>/pizzas/{pizza_id}</td> <td>Atualiza informações de uma pizza</td> <td>Sim (Admin)</td> </tr> <tr> <td>DELETE</td> <td>/pizzas/{pizza_id}</td> <td>Remove uma pizza</td> <td>Sim (Admin)</td> </tr> </tbody> </table> <p><strong>Order</strong></p> <table> <thead> <tr> <th>Método</th> <th>Endpoint</th> <th>Descrição</th> <th>Protegido</th> </tr> </thead> <tbody> <tr> <td>GET</td> <td>/orders</td> <td>Lista todos os pedidos</td> <td>Sim (Admin)</td> </tr> <tr> <td>GET</td> <td>/orders/users/{user_id}</td> <td>Lista todos os pedidos associado a um usuário específico</td> <td>Sim</td> </tr> <tr> <td>GET</td> <td>/orders/{order_id}/users/{user_id}</td> <td>Obtém os detalhes de um pedido associado a um usuário específico</td> <td>Sim</td> </tr> <tr> <td>GET</td> <td>/orders/{order_id}</td> <td>Obtém os detalhes de um pedido específico</td> <td>Sim</td> </tr> <tr> <td>POST</td> <td>/orders/users/{user_id}</td> <td>Criar um novo pedido associado a um usuário específico</td> <td>Sim</td> </tr> <tr> <td>PUT</td> <td>/orders/users/{user_id}</td> <td>Atualiza as informações de um pedido de um usuário específico</td> <td>Sim</td> </tr> <tr> <td>DELETE</td> <td>/orders/{order_id}</td> <td>Remove um pedido</td> <td>Sim (Admin)</td> </tr> </tbody> </table> <p><strong>User</strong></p> <table> <thead> <tr> <th>Método</th> <th>Endpoint</th> <th>Descrição</th> <th>Protegido</th> </tr> </thead> <tbody> <tr> <td>GET</td> <td>/users</td> <td>Lista todos os usuários</td> <td>Sim (Admin)</td> </tr> <tr> <td>GET</td> <td>/users/{user_id}</td> <td>Obtém os detalhes de um usuário específico</td> <td>Sim</td> </tr> <tr> <td>POST</td> <td>/users</td> <td>Criar um novo usuário</td> <td>Não</td> </tr> <tr> <td>PUT</td> <td>/users/{user_id}</td> <td>Atualiza as informações de um usuário específico</td> <td>Sim</td> </tr> <tr> <td>DELETE</td> <td>/users/{user_id}</td> <td>Remove um usuário</td> <td>Sim (Admin)</td> </tr> <tr> <td>POST</td> <td>/users/login</td> <td>Autentica um usuário e faz login</td> <td>Não</td> </tr> <tr> <td>POST</td> <td>/users/logout</td> <td>Faz logout do usuário autenticado</td> <td>Não</td> </tr> </tbody> </table> <p><strong>Location</strong></p> <table> <thead> <tr> <th>Método</th> <th>Endpoint</th> <th>Descrição</th> <th>Protegido</th> </tr> </thead> <tbody> <tr> <td>GET</td> <td>/api/locations</td> <td>Lista todos os Estados e Cidades</td> <td>Sim (Admin)</td> </tr> <tr> <td>GET</td> <td>/api/locations/{zipcode}</td> <td>Obtém o Estado e a Cidade através do código postal</td> <td>Sim</td> </tr> <tr> <td>POST</td> <td>/api/locations</td> <td>Cria um Estado e Cidade</td> <td>Sim (Admin)</td> </tr> <tr> <td>PUT</td> <td>/api/locations/{location_id}</td> <td>Atualiza as informações de um Estado e Cidade</td> <td>Sim (Admin)</td> </tr> <tr> <td>DELETE</td> <td>/api/locations/{location_id}</td> <td>Remove um Estado e Cidade</td> <td>Sim (Admin)</td> </tr> </tbody> </table> <div class=footnote> <hr> <ol> <li id=fn:1> <p><a href=https://amzn.to/43DR3SM>Robinson, Ian; Webber, Jim; Parastatidis, Savas, <em>REST in Practice</em>, Chapter 1. The Web As a Platform for Building Distributed Systems. O'Reilly Media</a>&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Daniel Armbrust. Todos os direitos reservados. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.linkedin.com/in/daniel-armbrust/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>